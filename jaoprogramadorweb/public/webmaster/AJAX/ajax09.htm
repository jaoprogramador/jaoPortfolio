<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>C&oacute;mo hacer una p&aacute;gina AJAX</title>
<META http-equiv=Content-Language content=es>
<META content="Programación,Programas,Aplicaciones,Ejercicios, Ejemplos,Tutoriales,Manuales" name=description>
<meta name="keywords" content="Primera página AJAX, Como hacer una pagina AJAX, Manual AJAX, tutorial AJAX, Ejemplos AJAX, ejercicios AJAX">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<META content=euskalnet.net/jaoprogramador name=author>
<META content="Copyright (c) 2005 jaoprogramador" name=copyright>
<META scheme=RFC1766 content=español name=DC.Language>
<META content=es,sp,spanish,español name=lang>
<META content=all name=robots>
<link href="../../styles/estilos.css" rel="stylesheet" type="text/css">
</head>
<body>
<table class="tablaContenidos">
  <tr> 
    <td height="39" colspan="3"> <h2>Aplicaciones complejas</h2></td>
  </tr>
  <tr> 
    <td height="394" colspan="3"> <h3>Envío de parámetros mediante XML</h3>
      <p>La flexibilidad del objeto XMLHttpRequest permite el env&iacute;o de 
        los par&aacute;metros por otros medios alternativos a la tradicional query 
        string. De esta forma, si la aplicaci&oacute;n del servidor as&iacute; 
        lo requeire, es posible realizar una petici&oacute;n al servidor enviando 
        los par&aacute;metros en formato XML.<br>
        A continuaci&oacute;n se modifica el ejemplo anterior para enviar los 
        datos del usuario en forma de documento XML. En primer lugar, se modifica 
        la llamada a la funci&oacute;n que construye la query string:<br>
        function valida() {<br>
        peticion_http = inicializa_xhr();<br>
        if(peticion_http) {<br>
        peticion_http.onreadystatechange = procesaRespuesta;<br>
        peticion_http.open(&quot;POST&quot;, &quot;http://localhost/validaDatos.php&quot;, 
        true);<br>
        var parametros_xml = crea_xml();<br>
        peticion_http.setRequestHeader(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);<br>
        peticion_http.send(parametros_xml);<br>
        }<br>
        }<br>
        Seguidamente, se crea la funci&oacute;n crea_xml() que se encarga de construir 
        el documento XML que contiene los par&aacute;metros enviados al servidor:<br>
        function crea_xml() {<br>
        var fecha = document.getElementById(&quot;fecha_nacimiento&quot;);<br>
        var cp = document.getElementById(&quot;codigo_postal&quot;);<br>
        var telefono = document.getElementById(&quot;telefono&quot;);<br>
        var xml = &quot;&lt;parametros&gt;&quot;;<br>
        xml = xml + &quot;&lt;fecha_nacimiento&gt;&quot; + fecha.value + &quot;&lt;\/fecha_nacimiento&gt;&quot;;<br>
        xml = xml + &quot;&lt;codigo_postal&gt;&quot; + cp.value + &quot;&lt;\/codigo_postal&gt;&quot;;<br>
        xml = xml + &quot;&lt;telefono&gt;&quot; + telefono.value + &quot;&lt;\/telefono&gt;&quot;;<br>
        xml = xml + &quot;&lt;\/parametros&gt;&quot;;<br>
        return xml;<br>
        }<br>
        El c&oacute;digo de la funci&oacute;n anterior emplea el car&aacute;cter 
        \ en el cierre de todas las etiquetas XML. El motivo es que las etiquetas 
        de cierre XML y HTML (al contrario que las etiquetas de apertura) se interpretan 
        en el mismo lugar en el que se encuentran, por lo que si no se incluyen 
        esos caracteres \ el c&oacute;digo no validar&iacute;a siguiendo el est&aacute;ndar 
        XHTML de forma estricta.<br>
        El m&eacute;todo send() del objeto XMLHttpRequest permite el env&iacute;o 
        de una cadena de texto y de un documento XML. Sin embargo, en el ejemplo 
        anterior se ha optado por una soluci&oacute;n intermedia:<br>
        una cadena de texto que representa un documento XML. El motivo es que 
        no existe a d&iacute;a de hoy un m&eacute;todo robusto y que se pueda 
        emplear en la mayor&iacute;a de navegadores para la creaci&oacute;n de 
        documentos XML completos.</p>
      
      <p></p></td>
  </tr>
  <tr> 
    <td width="66" height="21"></td>
    <td width="324" height="21">&nbsp;</td>
    <td width="149"><div align="right"><a href="../index.htm" target="_parent">&lt;&lt;Men&uacute; 
        Inicio</a></div></td>
  </tr>
</table>
<p>&nbsp;</p>
</body>
</html>
