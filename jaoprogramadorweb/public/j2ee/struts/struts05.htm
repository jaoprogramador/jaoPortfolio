<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>View</title>
<META http-equiv=Content-Language content=es>
<META content="Programación en Struts,Programas Struts,Aplicaciones en Struts,Ejercicios en Struts, Ejemplos de Struts,Tutoriales de Struts,Manuales Struts" name=description>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="keywords" content="Struts, Manual Struts, tutorial Struts, Ejemplos Struts, ejercicios Struts">
<META content=euskalnet.net/jaoprogramador name=author>
<META content="Copyright (c) 2005 jaoprogramador" name=copyright>
<META scheme=RFC1766 content=español name=DC.Language>
<META content=es,sp,spanish,español name=lang>
<META content=all name=robots>
<link href="../../styles/estilos.css" rel="stylesheet" type="text/css">
</head>

<body>
<table class="tablaContenidos">
  <tr> 
    <td height="39" colspan="3"> <h2> <strong>View</strong></h2></td>
  </tr>
  <tr> 
    <td height="258" colspan="3"> <table width="472" border="0" >
        <tr> 
          <td width="21%"><h3>Contenido:</h3></td>
          <td width="79%"></td>
        </tr>
        <tr> 
          <td>&nbsp;</td>
          <td><a href="struts05.htm#1">- Introducci&oacute;n</a></td>
        </tr>
        <tr> 
          <td>&nbsp;</td>
          <td><a href="struts05.htm#2">- </a>Internacionalizaci&oacute;n</td>
        </tr>
        <tr> 
          <td>&nbsp;</td>
          <td><a href="struts05.htm#3">- Veamos la receta</a></td>
        </tr>
      </table>
      <h3>Introducci&oacute;n<a name="1"></a></h3>
      <p>La View comprende las JSP (principalmente) y los servlets involucrados 
        en la generaci&oacute;n de la interfaz de usuario o con otros Sistemas. 
        Struts provee soporte para construir aplicaciones multi-idioma, interacci&oacute;n 
        con formularios y otras utilidades mediante la utilizaci&oacute;n de Tags 
        especiales (TagLibraries).<br></p>
        
      <h3>Internacionalizaci&oacute;n<a name="2"></a></h3>

      <p>Lo podemos abreviar en la siguiente receta:</p>
      <p> 1. Crear un archivo de texto (ej: MiAplicacion.properties) en el directorio 
        donde se encuentren las clases de la aplicaci&oacute;n (ej: d:\com\empresa\aplicacion) 
        donde se contengan las claves y valores con el formato clave.subclave=texto 
        de los textos que pertenezcan al idioma principal. Ejemplo:</p>
      <p> ...<br>
        application.title= Demo de Struts en APLICACION<br>
        index.header=Bienvenido a la Demo de Struts en APLICACION<br>
        ...</p>
      <p> 2. Para cada idioma alternativo se crear&aacute; un archivo nuevo que 
        se llame igual pero que termine en &quot;_xx.properties&quot; siendo xx 
        el c&oacute;digo ISO de idioma (ej: MiAplicaci&oacute;n_en.properties).<br>
        3. En struts-config.xml se debe configurar el Tag /servlet/init-param/param-name 
        application y ponerle como param-value la localizaci&oacute;n del archivo 
        con el idioma principal. Ejemplo:</p>
      <p> &lt;servlet&gt;<br>
        &lt;servlet-name&gt;action&lt;/servlet-name&gt;<br>
        ...<br>
        &lt;init-param&gt;<br>
        &lt;param-name&gt;application&lt;/param-name&gt;<br>
        &lt;param-value&gt;com.empresa.aplicacion.MiAplicacion&lt;/param-value&gt;<br>
        &lt;/init-param&gt;<br>
        ...</p>
      <p> 4. En web.xml deberemos inclur:</p>
      <p> &lt;web-app&gt;<br>
        ...<br>
        &lt;taglib&gt;<br>
        &lt;taglib-uri&gt;/WEB-INF/struts-bean.tld&lt;/taglib-uri&gt;<br>
        &lt;taglib-location&gt;/WEB-INF/struts-bean.tld&lt;/taglib-location&gt;<br>
        &lt;/taglib&gt;<br>
        ...<br>
        &lt;/web-app&gt;</p>
      <p> 5. En las JSPs donde utilicemos la internacionalizaci&oacute;n deberemos 
        incluir al comienzo:</p>
      <p> ...<br>
        &lt;%@ taglib uri=&quot;/WEB-INF/struts-bean.tld&quot; prefix=&quot;bean&quot; 
        %&gt;<br>
        ...</p>
      <p> para declarar que utilizaremos la TagLibrary struts-bean con el prefijo 
        bean y definida en /WEB-INF/struts-bean.tld<br>
        6. Y finalmente, utilizaremos el Tag &lt;bean:message key=&quot;clave.subclave&quot;/&gt; 
        donde clave y subclave corresponden al texto por el que se reemplazar&aacute; 
        seg&uacute;n el idioma del usuario. Ejemplo</p>
      <p> ...<br>
        &lt;TITLE&gt;&lt;bean:message key=&quot;application.title&quot;/&gt;&lt;/TITLE&gt;<br>
        ...</p>
      <p>Por defecto Struts asigna a cada usuario el idioma principal de la aplicaci&oacute;n. 
        Si se utiliza el tag &lt;html:html locale=&quot;true&quot;&gt; (reemplaza 
        a &quot;&lt;html&gt;&quot; y debe cerrarse con &quot;&lt;/html:html&gt;&quot;) 
        entonces se utilizar&aacute; el primero de los idiomas soportados por 
        la aplicaci&oacute;n que se encuentre en el header &quot;Accept-Language&quot; 
        enviado por su navegador. Pero si se desea proponerle al usuario una lista 
        de idiomas entonces &eacute;ste podr&aacute; cambiarse mediante session.setAttribute( 
        Action.LOCALE_KEY, new java.util.Locale(country, language)) donde country 
        y language ser&aacute;n el string del pa&iacute;s e idioma a establecer.</p>
      <p>Adem&aacute;s de texto podran incluirse variables (al igual que se hace 
        en los println) y hasta formato de datos. Para m&aacute;s informaci&oacute;n 
        ver la documentaci&oacute;n oficial de Sun disponible en http://java.sun.com/j2se/1.3/docs/guide/intl/<br>
        . Forms</p>
      <p>Una de las tareas que durante el desarrollo de una aplicaci&oacute;n 
        insume mucho trabajo (aunque en realidad no lo merezcan) es la interacci&oacute;n 
        con formularios, ya sea para editar u obtener nueva informaci&oacute;n. 
        Las comprobaciones, la gesti&oacute;n de errores, el volver a presentarle 
        el mismo form al usuario con los valores que puso y los mensajes de error 
        y un largo etc&eacute;tera est&aacute;n soportadas por Struts a fines 
        de hacernos la vida un poco m&aacute;s f&aacute;cil.</p>
      <p>La idea es la siguiente: todo el trabajo de comprobaciones y generaci&oacute;n 
        de mensajes de error se implementa en los ActionForm y todo el trabajo 
        de generaci&oacute;n de interfaz en la/s JSP.</p>
      <h3>Veamos la receta:<a name="3"></a></h3>
      <p> 1. Crear el ActionForm (ver la secci&oacute;n Model / ActionForm Beans)<br>
        2. Crear la p&aacute;gina JSP del formulario utilizando los Tags que provee 
        Struts (ver la secci&oacute;n View / Tags). Ejemplo:</p>
      <p> ...<br>
        &lt;%@ taglib uri=&quot;/WEB-INF/struts-bean.tld&quot; prefix=&quot;bean&quot; 
        %&gt;<br>
        &lt;%@ taglib uri=&quot;/WEB-INF/struts-html.tld&quot; prefix=&quot;html&quot; 
        %&gt;<br>
        ...<br>
        &lt;html:html&gt;<br>
        ...<br>
        &lt;html:form action=&quot;/logon&quot; focus=&quot;username&quot;&gt;<br>
        ...<br>
        &lt;h1&gt;&lt;bean:message key=&quot;logon.header&quot;/&gt;&lt;/h1&gt;<br>
        &lt;html:form action=&quot;/logon&quot; focus=&quot;username&quot;&gt;<br>
        &lt;h5&gt;&lt;html:errors/&gt;&lt;/h5&gt;<br>
        &lt;h3&gt;&lt;bean:message key=&quot;logon.mainText&quot;/&gt;&lt;/h3&gt;<br>
        &lt;p&gt;&lt;bean:message key=&quot;logon.username&quot;/&gt;<br>
        &lt;html:text property=&quot;username&quot; size=&quot;16&quot; maxlength=&quot;16&quot;/&gt;&lt;/p&gt;<br>
        &lt;p&gt;&lt;bean:message key=&quot;logon.password&quot;/&gt;<br>
        &lt;html:password property=&quot;password&quot; size=&quot;16&quot; maxlength=&quot;16&quot; 
        redisplay=false/&gt;&lt;/p&gt;<br>
        &lt;p&gt;&lt;html:submit property=&quot;submit&quot; value=&quot;Submit&quot;/&gt;&lt;/p&gt;<br>
        &lt;p&gt;&lt;html:reset/&gt;&lt;/p&gt;<br>
        ...<br>
        &lt;/html:form&gt;<br>
        ... <br>
        &lt;/html:html&gt;</p>
      <p> 3. Declarar el ActionForm en struts-config.xml agregando en /struts-config/form-beans 
        el tag &lt;form-bean name=&quot;nombreForm&quot; type=&quot;paquete.clase&quot;/&gt; 
        y en la declaraci&oacute;n del Action (ver la secci&oacute;n Controller 
        / Action Beans) agregar los atributos name=&quot;nombreForm&quot;, scope=&quot;(request 
        &oacute; session)&quot;, e input=&quot;paginaForm.jsp&quot;. Ejemplo:</p>
      <p> &lt;struts-config&gt;<br>
        ...<br>
        &lt;form-beans&gt;<br>
        ...<br>
        &lt;form-bean name=&quot;logonForm&quot; type=&quot;com.empresa.aplicacion.LogonForm&quot;/&gt;<br>
        ...<br>
        &lt;/form-beans&gt;<br>
        ...<br>
        &lt;action-mappings&gt;<br>
        ...<br>
        &lt;action path=&quot;/logon&quot; type=&quot;com.empresa.aplicacion.LogonAction&quot; 
        name=&quot;logonForm&quot; <br>
        scope=&quot;request&quot; input=&quot;/logon.jsp&quot;&gt;<br>
        ...<br>
        &lt;/action&gt;<br>
        ...<br>
        &lt;action-mappings&gt;<br>
        ...<br>
        &lt;/struts-config&gt;</p>
      <p><br>
      </p>
      <p><br>
      </p>
      </td>
  </tr>
  <tr> 
    <td width="66" height="21"></td>
    <td width="324" height="21">&nbsp;</td>
    <td width="149"><div align="right"><a href="../index.htm" target="_parent">&lt;&lt;Men&uacute; 
        Inicio</a></div></td>
  </tr>
</table>
<p>&nbsp;</p>
</body>
</html>
