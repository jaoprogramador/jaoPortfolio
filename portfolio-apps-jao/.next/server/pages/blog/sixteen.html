<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Blog - Apache Kafka y Zookeeper en Arquitectura de Microservicios</title><meta name="description" content="En arquitecturas de microservicios, Apache Kafka se ha convertido en el estándar para comunicación asíncrona y desacoplada. Aprende cómo Kafka y Zookeeper trabajan juntos y cómo puedes implementarlos en tu ecosistema Spring Boot."/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/e99fcc8540a81b1c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e99fcc8540a81b1c.css" data-n-g=""/><link rel="preload" href="/_next/static/css/f8f60675323764f2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f8f60675323764f2.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-570070fdbf91d417.js" defer=""></script><script src="/_next/static/chunks/framework-75db3117d1377048.js" defer=""></script><script src="/_next/static/chunks/main-6d31f1caf3df54dd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-5f8ee1ef90dcf6c7.js" defer=""></script><script src="/_next/static/chunks/94726e6d-c72a854d4bfca4da.js" defer=""></script><script src="/_next/static/chunks/144-4ce2b94271136310.js" defer=""></script><script src="/_next/static/chunks/996-f3cf67c2e3ac5e06.js" defer=""></script><script src="/_next/static/chunks/581-aae012922ce60763.js" defer=""></script><script src="/_next/static/chunks/941-ca823945d5078c94.js" defer=""></script><script src="/_next/static/chunks/924-dbd55959fd098bb5.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-c171fda68c6d5435.js" defer=""></script><script src="/_next/static/bp6bm31T7Im16mPLtlpcC/_buildManifest.js" defer=""></script><script src="/_next/static/bp6bm31T7Im16mPLtlpcC/_ssgManifest.js" defer=""></script><script src="/_next/static/bp6bm31T7Im16mPLtlpcC/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><script>!function(){try{var d=document.documentElement,n='data-theme',s='setAttribute';var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';d[s](n,'dark')}else{d.style.colorScheme = 'light';d[s](n,'light')}}else if(e){d[s](n,e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="container mx-auto mt-10 cursor-none"><div class="block tablet:hidden mt-5"><div class="flex items-center justify-between p-2 laptop:p-0"><h1 class="font-medium p-2 laptop:p-0 link">JAO<!-- -->.<!-- --></h1><div class="flex items-center"><select class="ml-2 p-1 border rounded transition-all duration-300 ease-out
        bg-white text-black border-gray-300
        hover:scale-105 active:scale-100 cursor-none undefined"><option value="es">🇪🇸 Castellano<!-- --></option><option value="en" selected="">🇬🇧 English<!-- --></option><option value="eu">🇪🇺 Euskera<!-- --></option></select><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined"><img class="h-6" src="/images/sun.svg" alt="Toggle theme"/></button><button id="headlessui-popover-button-:R4n6:" type="button" aria-expanded="false"><img class="h-5" src="/images/menu.svg" alt="Menu toggle"/></button></div></div></div><div class="mt-10 hidden flex-row items-center justify-between sticky dark:text-white top-0 z-10 tablet:flex"><h1 class="font-medium cursor-pointer">JAO<!-- -->.<!-- --></h1><div class="flex"><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Home</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Work</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">About</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Blog</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Frameworks</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Resume</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Contact</button><select class="ml-2 p-1 border rounded transition-all duration-300 ease-out
        bg-white text-black border-gray-300
        hover:scale-105 active:scale-100 cursor-none undefined"><option value="es">🇪🇸 Castellano<!-- --></option><option value="en" selected="">🇬🇧 English<!-- --></option><option value="eu">🇪🇺 Euskera<!-- --></option></select></div></div><div class="mt-10 flex flex-col"><img class="w-full h-96 rounded-lg shadow-lg object-cover" src="/images/blogs/point-normal-35_0UPwl6eo-unsplash.jpg" alt="Apache Kafka y Zookeeper en Arquitectura de Microservicios"/><h1 class="mt-10 text-4xl mob:text-2xl laptop:text-6xl text-bold">Apache Kafka y Zookeeper en Arquitectura de Microservicios</h1><h2 class="mt-2 text-xl max-w-4xl text-darkgray opacity-50">Cómo integrar Kafka y Zookeeper para construir sistemas distribuidos robustos y escalables</h2></div><div class="markdown-class"><h1>Apache Kafka y Zookeeper en Arquitectura de Microservicios<!-- --></h1>
<!-- --><p>En el mundo de los microservicios, uno de los mayores retos es la <!-- --><strong>comunicación entre servicios<!-- --></strong>: confiable, escalable y desacoplada. Aquí es donde entra <!-- --><strong>Apache Kafka<!-- --></strong>, una plataforma de mensajería distribuida que permite que los servicios se comuniquen de forma eficiente, <!-- --><strong>sin acoplamientos directos<!-- --></strong>.<!-- --></p>
<!-- --><p>Pero, ¿qué papel juega Zookeeper? ¿Cómo se conectan ambos? ¿Y cómo se integra todo esto en una arquitectura basada en Java Spring Boot?<!-- --></p>
<!-- --><p>Vamos a explorarlo. 👇<!-- --></p>
<!-- --><hr/>
<!-- --><h2>¿Qué es Apache Kafka?<!-- --></h2>
<!-- --><p>Apache Kafka es una <!-- --><strong>plataforma de mensajería distribuida basada en logs<!-- --></strong>. Permite publicar, almacenar y consumir flujos de eventos en tiempo real, y se utiliza como middleware en arquitecturas orientadas a eventos.<!-- --></p>
<!-- --><h3>Características clave:<!-- --></h3>
<!-- --><ul>
<!-- --><li>Alta disponibilidad y tolerancia a fallos<!-- --></li>
<!-- --><li>Almacenamiento persistente de eventos<!-- --></li>
<!-- --><li>Escalabilidad horizontal<!-- --></li>
<!-- --><li>Bajo acoplamiento entre productores y consumidores<!-- --></li>
<!-- --></ul>
<!-- --><hr/>
<!-- --><h2>¿Y qué hace Zookeeper?<!-- --></h2>
<!-- --><p><strong>Apache Zookeeper<!-- --></strong> es un sistema de coordinación distribuida que Kafka utiliza para:<!-- --></p>
<!-- --><ul>
<!-- --><li>Gestionar la configuración del clúster<!-- --></li>
<!-- --><li>Coordinar los brokers<!-- --></li>
<!-- --><li>Manejar la elección del líder del clúster<!-- --></li>
<!-- --><li>Supervisar el estado de los nodos<!-- --></li>
<!-- --></ul>
<!-- --><p>⚠️ Aunque Kafka ha evolucionado para reducir su dependencia de Zookeeper (desde Kafka 2.8 con KRaft), muchas instalaciones actuales aún lo utilizan.<!-- --></p>
<!-- --><hr/>
<!-- --><h2>Kafka en Arquitectura de Microservicios<!-- --></h2>
<!-- --><h3>🧩 Escenario común:<!-- --></h3>
<!-- --><ul>
<!-- --><li>Cada microservicio produce y consume eventos.<!-- --></li>
<!-- --><li>No se comunican entre sí directamente, sino a través de <!-- --><strong>topics de Kafka<!-- --></strong>.<!-- --></li>
<!-- --><li>Se desacoplan totalmente: ni conocen la URL del otro ni esperan respuestas.<!-- --></li>
<!-- --></ul>
<!-- --><h3>🕸 Patrón resultante: <!-- --><strong>Event-Driven Architecture (EDA)<!-- --></strong></h3>
<!-- --><p>Cada servicio actúa como <!-- --><strong>productor<!-- --></strong>, <!-- --><strong>consumidor<!-- --></strong>, o ambos:<!-- --></p>
<!-- --><pre><div style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-bash" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#f8f8f2">[<!-- --></span><span> Servicio A <!-- --></span><span class="token" style="color:#f8f8f2">]<!-- --></span><span> ---<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span><span> topic: nuevo-usuario ---<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span><span> <!-- --></span><span class="token" style="color:#f8f8f2">[<!-- --></span><span> Servicio B <!-- --></span><span class="token" style="color:#f8f8f2">]<!-- --></span></code></div></pre>
<!-- --><h3>Organización de Topics<!-- --></h3>
<!-- --><p>Algunos ejemplos de topics comunes en sistemas reales:<!-- --></p>
<!-- --><p>usuarios.creados<!-- --></p>
<!-- --><p>ordenes.pagadas<!-- --></p>
<!-- --><p>notificaciones.enviadas<!-- --></p>
<!-- --><p>stock.actualizado<!-- --></p>
<!-- --><p>Cada evento representa un hecho ocurrido en el sistema, que puede interesar a múltiples consumidores.<!-- --></p>
<!-- --><h3>Implementación básica con Spring Boot<!-- --></h3>
<!-- --><h2>Dependencias:<!-- --></h2>
<!-- --><pre><div style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-xml" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#6272a4">&lt;!-- pom.xml --&gt;<!-- --></span><span>
<!-- --></span><span></span><span class="token" style="color:#f8f8f2">&lt;<!-- --></span><span class="token" style="color:#ff79c6">dependency<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token" style="color:#f8f8f2">&lt;<!-- --></span><span class="token" style="color:#ff79c6">groupId<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span><span>org.springframework.kafka<!-- --></span><span class="token" style="color:#f8f8f2">&lt;/<!-- --></span><span class="token" style="color:#ff79c6">groupId<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token" style="color:#f8f8f2">&lt;<!-- --></span><span class="token" style="color:#ff79c6">artifactId<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span><span>spring-kafka<!-- --></span><span class="token" style="color:#f8f8f2">&lt;/<!-- --></span><span class="token" style="color:#ff79c6">artifactId<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span><span>
<!-- --></span><span></span><span class="token" style="color:#f8f8f2">&lt;/<!-- --></span><span class="token" style="color:#ff79c6">dependency<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span></code></div></pre>
<!-- --><h2>Configuración Kafka:<!-- --></h2>
<!-- --><pre><div style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-xml" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span># application.yml
<!-- --></span>spring:
<!-- -->  kafka:
<!-- -->    bootstrap-servers: localhost:9092
<!-- -->    consumer:
<!-- -->      group-id: microservicio-a
<!-- -->      auto-offset-reset: earliest
<!-- -->      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
<!-- -->      value-deserializer: org.apache.kafka.common.serialization.StringDeserializer
<!-- -->    producer:
<!-- -->      key-serializer: org.apache.kafka.common.serialization.StringSerializer
<!-- -->      value-serializer: org.apache.kafka.common.serialization.StringSerializer<!-- --></code></div></pre>
<!-- --><h3>Productor:<!-- --></h3>
<!-- --><pre><div style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-java" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token annotation" style="color:#f8f8f2">@Service<!-- --></span><span>
<!-- --></span><span></span><span class="token" style="color:#8be9fd">public<!-- --></span><span> <!-- --></span><span class="token" style="color:#8be9fd">class<!-- --></span><span> <!-- --></span><span class="token" style="color:#f1fa8c">UsuarioProducer<!-- --></span><span> <!-- --></span><span class="token" style="color:#f8f8f2">{<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token" style="color:#8be9fd">private<!-- --></span><span> <!-- --></span><span class="token" style="color:#8be9fd">final<!-- --></span><span> <!-- --></span><span class="token" style="color:#f1fa8c">KafkaTemplate<!-- --></span><span class="token generics" style="color:#f8f8f2">&lt;<!-- --></span><span class="token generics" style="color:#f1fa8c">String<!-- --></span><span class="token generics" style="color:#f8f8f2">,<!-- --></span><span class="token generics"> <!-- --></span><span class="token generics" style="color:#f1fa8c">String<!-- --></span><span class="token generics" style="color:#f8f8f2">&gt;<!-- --></span><span> kafkaTemplate<!-- --></span><span class="token" style="color:#f8f8f2">;<!-- --></span><span>
<!-- --></span>
<!-- --><span>    <!-- --></span><span class="token" style="color:#8be9fd">public<!-- --></span><span> <!-- --></span><span class="token" style="color:#f1fa8c">UsuarioProducer<!-- --></span><span class="token" style="color:#f8f8f2">(<!-- --></span><span class="token" style="color:#f1fa8c">KafkaTemplate<!-- --></span><span class="token generics" style="color:#f8f8f2">&lt;<!-- --></span><span class="token generics" style="color:#f1fa8c">String<!-- --></span><span class="token generics" style="color:#f8f8f2">,<!-- --></span><span class="token generics"> <!-- --></span><span class="token generics" style="color:#f1fa8c">String<!-- --></span><span class="token generics" style="color:#f8f8f2">&gt;<!-- --></span><span> kafkaTemplate<!-- --></span><span class="token" style="color:#f8f8f2">)<!-- --></span><span> <!-- --></span><span class="token" style="color:#f8f8f2">{<!-- --></span><span>
<!-- --></span><span>        <!-- --></span><span class="token" style="color:#8be9fd">this<!-- --></span><span class="token" style="color:#f8f8f2">.<!-- --></span><span>kafkaTemplate <!-- --></span><span class="token" style="color:#f8f8f2">=<!-- --></span><span> kafkaTemplate<!-- --></span><span class="token" style="color:#f8f8f2">;<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token" style="color:#f8f8f2">}<!-- --></span><span>
<!-- --></span>
<!-- --><span>    <!-- --></span><span class="token" style="color:#8be9fd">public<!-- --></span><span> <!-- --></span><span class="token" style="color:#8be9fd">void<!-- --></span><span> <!-- --></span><span class="token" style="color:#f1fa8c">publicarNuevoUsuario<!-- --></span><span class="token" style="color:#f8f8f2">(<!-- --></span><span class="token" style="color:#f1fa8c">String<!-- --></span><span> usuarioJson<!-- --></span><span class="token" style="color:#f8f8f2">)<!-- --></span><span> <!-- --></span><span class="token" style="color:#f8f8f2">{<!-- --></span><span>
<!-- --></span><span>        kafkaTemplate<!-- --></span><span class="token" style="color:#f8f8f2">.<!-- --></span><span class="token" style="color:#f1fa8c">send<!-- --></span><span class="token" style="color:#f8f8f2">(<!-- --></span><span class="token" style="color:#50fa7b">&quot;usuarios.creados&quot;<!-- --></span><span class="token" style="color:#f8f8f2">,<!-- --></span><span> usuarioJson<!-- --></span><span class="token" style="color:#f8f8f2">)<!-- --></span><span class="token" style="color:#f8f8f2">;<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token" style="color:#f8f8f2">}<!-- --></span><span>
<!-- --></span><span></span><span class="token" style="color:#f8f8f2">}<!-- --></span><span>
<!-- --></span></code></div></pre>
<!-- --><h3>Consumidor:<!-- --></h3>
<!-- --><pre><div style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-java" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token annotation" style="color:#f8f8f2">@Component<!-- --></span><span>
<!-- --></span><span></span><span class="token" style="color:#8be9fd">public<!-- --></span><span> <!-- --></span><span class="token" style="color:#8be9fd">class<!-- --></span><span> <!-- --></span><span class="token" style="color:#f1fa8c">UsuarioListener<!-- --></span><span> <!-- --></span><span class="token" style="color:#f8f8f2">{<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token annotation" style="color:#f8f8f2">@KafkaListener<!-- --></span><span class="token" style="color:#f8f8f2">(<!-- --></span><span>topics <!-- --></span><span class="token" style="color:#f8f8f2">=<!-- --></span><span> <!-- --></span><span class="token" style="color:#50fa7b">&quot;usuarios.creados&quot;<!-- --></span><span class="token" style="color:#f8f8f2">,<!-- --></span><span> groupId <!-- --></span><span class="token" style="color:#f8f8f2">=<!-- --></span><span> <!-- --></span><span class="token" style="color:#50fa7b">&quot;servicio-notificaciones&quot;<!-- --></span><span class="token" style="color:#f8f8f2">)<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token" style="color:#8be9fd">public<!-- --></span><span> <!-- --></span><span class="token" style="color:#8be9fd">void<!-- --></span><span> <!-- --></span><span class="token" style="color:#f1fa8c">escuchar<!-- --></span><span class="token" style="color:#f8f8f2">(<!-- --></span><span class="token" style="color:#f1fa8c">String<!-- --></span><span> mensaje<!-- --></span><span class="token" style="color:#f8f8f2">)<!-- --></span><span> <!-- --></span><span class="token" style="color:#f8f8f2">{<!-- --></span><span>
<!-- --></span><span>        <!-- --></span><span class="token" style="color:#f1fa8c">System<!-- --></span><span class="token" style="color:#f8f8f2">.<!-- --></span><span>out<!-- --></span><span class="token" style="color:#f8f8f2">.<!-- --></span><span class="token" style="color:#f1fa8c">println<!-- --></span><span class="token" style="color:#f8f8f2">(<!-- --></span><span class="token" style="color:#50fa7b">&quot;Usuario nuevo recibido: &quot;<!-- --></span><span> <!-- --></span><span class="token" style="color:#f8f8f2">+<!-- --></span><span> mensaje<!-- --></span><span class="token" style="color:#f8f8f2">)<!-- --></span><span class="token" style="color:#f8f8f2">;<!-- --></span><span>
<!-- --></span><span>        <!-- --></span><span class="token" style="color:#6272a4">// lógica de negocio aquí<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token" style="color:#f8f8f2">}<!-- --></span><span>
<!-- --></span><span></span><span class="token" style="color:#f8f8f2">}<!-- --></span></code></div></pre>
<!-- --><h3>Ventajas de Kafka + Microservicios<!-- --></h3>
<!-- --><p>✅ Comunicación desacoplada<!-- --></p>
<!-- --><p>✅ Escalabilidad natural (varios consumidores por topic)<!-- --></p>
<!-- --><p>✅ Persistencia de eventos (no pierdes datos si un servicio cae)<!-- --></p>
<!-- --><p>✅ Integración sencilla con Spring Boot<!-- --></p>
<!-- --><p>✅ Soporte para múltiples patrones (event sourcing, CQRS, pub/sub, etc.)<!-- --></p>
<!-- --><h3>Consideraciones importantes<!-- --></h3>
<!-- --><p>Define bien la retención de datos en tus topics (por tiempo o tamaño).<!-- --></p>
<!-- --><p>Gestiona el schema de eventos (usa Apache Avro, JSON Schema, Protobuf).<!-- --></p>
<!-- --><p>Cuidado con los procesamientos duplicados o fuera de orden (usa idempotency).<!-- --></p>
<!-- --><p>Supervisa el clúster con herramientas como Kafka Manager o Confluent Control Center.<!-- --></p>
<!-- --><p>Automatiza pruebas de integración con Testcontainers para Kafka.<!-- --></p>
<!-- --><h3>Alternativas modernas sin Zookeeper<!-- --></h3>
<!-- --><p>Desde Kafka 2.8 es posible usar KRaft mode, que elimina la necesidad de Zookeeper para entornos más simples. Ideal para proyectos nuevos que no requieren una capa de coordinación externa.<!-- --></p>
<!-- --><h3>Conclusión<!-- --></h3>
<!-- --><p>Apache Kafka, combinado con Zookeeper (o KRaft), es una solución poderosa para construir microservicios orientados a eventos. Permite crear sistemas altamente disponibles, desacoplados y preparados para el crecimiento.<!-- --></p>
<!-- --><p>Implementarlo correctamente en Spring Boot es una gran inversión en la calidad y escalabilidad de tus aplicaciones.<!-- --></p></div><div class="mt-5 laptop:mt-40 p-2 laptop:p-0"><div><h1 class="text-2xl text-bold">Contact.</h1><div class="mt-10"><h1 class="text-3xl tablet:text-6xl laptop:text-6xl laptopl:text-8xl text-bold">LET&#x27;S WORK TOGETHER</h1><h1 class="text-3xl tablet:text-6xl laptop:text-6xl laptopl:text-8xl text-bold"></h1><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg bg-black text-white  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Schedule a call</button><div class="mt-10"><div class="undefined flex flex-wrap mob:flex-nowrap link"><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Github</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">LinkedIn</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Twitter</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Blog</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Email</button></div></div></div></div></div><h1 class="text-sm text-bold mt-2 laptop:mt-10 p-2 laptop:p-0">Made With ❤ by<!-- --> <!-- --><a class="underline underline-offset-1" href="https://jaoportfolio.onrender.com/">Juan Arana Olalde</a></h1></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"date":"2025-08-26T17:00:00.000Z","slug":"sixteen","preview":"En arquitecturas de microservicios, Apache Kafka se ha convertido en el estándar para comunicación asíncrona y desacoplada. Aprende cómo Kafka y Zookeeper trabajan juntos y cómo puedes implementarlos en tu ecosistema Spring Boot.","title":"Apache Kafka y Zookeeper en Arquitectura de Microservicios","tagline":"Cómo integrar Kafka y Zookeeper para construir sistemas distribuidos robustos y escalables","image":"/images/blogs/point-normal-35_0UPwl6eo-unsplash.jpg","content":"# Apache Kafka y Zookeeper en Arquitectura de Microservicios\r\n\r\nEn el mundo de los microservicios, uno de los mayores retos es la **comunicación entre servicios**: confiable, escalable y desacoplada. Aquí es donde entra **Apache Kafka**, una plataforma de mensajería distribuida que permite que los servicios se comuniquen de forma eficiente, **sin acoplamientos directos**.\r\n\r\nPero, ¿qué papel juega Zookeeper? ¿Cómo se conectan ambos? ¿Y cómo se integra todo esto en una arquitectura basada en Java Spring Boot?\r\n\r\nVamos a explorarlo. 👇\r\n\r\n---\r\n\r\n## ¿Qué es Apache Kafka?\r\n\r\nApache Kafka es una **plataforma de mensajería distribuida basada en logs**. Permite publicar, almacenar y consumir flujos de eventos en tiempo real, y se utiliza como middleware en arquitecturas orientadas a eventos.\r\n\r\n### Características clave:\r\n\r\n- Alta disponibilidad y tolerancia a fallos  \r\n- Almacenamiento persistente de eventos  \r\n- Escalabilidad horizontal  \r\n- Bajo acoplamiento entre productores y consumidores\r\n\r\n---\r\n\r\n## ¿Y qué hace Zookeeper?\r\n\r\n**Apache Zookeeper** es un sistema de coordinación distribuida que Kafka utiliza para:\r\n\r\n- Gestionar la configuración del clúster  \r\n- Coordinar los brokers  \r\n- Manejar la elección del líder del clúster  \r\n- Supervisar el estado de los nodos\r\n\r\n⚠️ Aunque Kafka ha evolucionado para reducir su dependencia de Zookeeper (desde Kafka 2.8 con KRaft), muchas instalaciones actuales aún lo utilizan.\r\n\r\n---\r\n\r\n## Kafka en Arquitectura de Microservicios\r\n\r\n### 🧩 Escenario común:\r\n\r\n- Cada microservicio produce y consume eventos.  \r\n- No se comunican entre sí directamente, sino a través de **topics de Kafka**.  \r\n- Se desacoplan totalmente: ni conocen la URL del otro ni esperan respuestas.\r\n\r\n### 🕸 Patrón resultante: **Event-Driven Architecture (EDA)**\r\n\r\nCada servicio actúa como **productor**, **consumidor**, o ambos:\r\n\r\n```bash\r\n[ Servicio A ] ---\u003e topic: nuevo-usuario ---\u003e [ Servicio B ]\r\n```\r\n\r\n### Organización de Topics\r\n\r\nAlgunos ejemplos de topics comunes en sistemas reales:\r\n\r\nusuarios.creados\r\n\r\nordenes.pagadas\r\n\r\nnotificaciones.enviadas\r\n\r\nstock.actualizado\r\n\r\nCada evento representa un hecho ocurrido en el sistema, que puede interesar a múltiples consumidores.\r\n\r\n### Implementación básica con Spring Boot\r\n## Dependencias:\r\n```xml\r\n\u003c!-- pom.xml --\u003e\r\n\u003cdependency\u003e\r\n    \u003cgroupId\u003eorg.springframework.kafka\u003c/groupId\u003e\r\n    \u003cartifactId\u003espring-kafka\u003c/artifactId\u003e\r\n\u003c/dependency\u003e\r\n```\r\n## Configuración Kafka:\r\n```xml\r\n# application.yml\r\nspring:\r\n  kafka:\r\n    bootstrap-servers: localhost:9092\r\n    consumer:\r\n      group-id: microservicio-a\r\n      auto-offset-reset: earliest\r\n      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer\r\n      value-deserializer: org.apache.kafka.common.serialization.StringDeserializer\r\n    producer:\r\n      key-serializer: org.apache.kafka.common.serialization.StringSerializer\r\n      value-serializer: org.apache.kafka.common.serialization.StringSerializer\r\n```\r\n### Productor:\r\n```java\r\n@Service\r\npublic class UsuarioProducer {\r\n    private final KafkaTemplate\u003cString, String\u003e kafkaTemplate;\r\n\r\n    public UsuarioProducer(KafkaTemplate\u003cString, String\u003e kafkaTemplate) {\r\n        this.kafkaTemplate = kafkaTemplate;\r\n    }\r\n\r\n    public void publicarNuevoUsuario(String usuarioJson) {\r\n        kafkaTemplate.send(\"usuarios.creados\", usuarioJson);\r\n    }\r\n}\r\n\r\n```\r\n### Consumidor:\r\n```java\r\n@Component\r\npublic class UsuarioListener {\r\n    @KafkaListener(topics = \"usuarios.creados\", groupId = \"servicio-notificaciones\")\r\n    public void escuchar(String mensaje) {\r\n        System.out.println(\"Usuario nuevo recibido: \" + mensaje);\r\n        // lógica de negocio aquí\r\n    }\r\n}\r\n```\r\n### Ventajas de Kafka + Microservicios\r\n\r\n✅ Comunicación desacoplada\r\n\r\n✅ Escalabilidad natural (varios consumidores por topic)\r\n\r\n✅ Persistencia de eventos (no pierdes datos si un servicio cae)\r\n\r\n✅ Integración sencilla con Spring Boot\r\n\r\n✅ Soporte para múltiples patrones (event sourcing, CQRS, pub/sub, etc.)\r\n\r\n### Consideraciones importantes\r\n\r\nDefine bien la retención de datos en tus topics (por tiempo o tamaño).\r\n\r\nGestiona el schema de eventos (usa Apache Avro, JSON Schema, Protobuf).\r\n\r\nCuidado con los procesamientos duplicados o fuera de orden (usa idempotency).\r\n\r\nSupervisa el clúster con herramientas como Kafka Manager o Confluent Control Center.\r\n\r\nAutomatiza pruebas de integración con Testcontainers para Kafka.\r\n\r\n### Alternativas modernas sin Zookeeper\r\n\r\nDesde Kafka 2.8 es posible usar KRaft mode, que elimina la necesidad de Zookeeper para entornos más simples. Ideal para proyectos nuevos que no requieren una capa de coordinación externa.\r\n\r\n### Conclusión\r\n\r\nApache Kafka, combinado con Zookeeper (o KRaft), es una solución poderosa para construir microservicios orientados a eventos. Permite crear sistemas altamente disponibles, desacoplados y preparados para el crecimiento.\r\n\r\nImplementarlo correctamente en Spring Boot es una gran inversión en la calidad y escalabilidad de tus aplicaciones."}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"sixteen"},"buildId":"bp6bm31T7Im16mPLtlpcC","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>