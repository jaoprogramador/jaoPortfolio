<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Blog - Apache Kafka y Zookeeper en Arquitectura de Microservicios</title><meta name="description" content="En arquitecturas de microservicios, Apache Kafka se ha convertido en el est√°ndar para comunicaci√≥n as√≠ncrona y desacoplada. Aprende c√≥mo Kafka y Zookeeper trabajan juntos y c√≥mo puedes implementarlos en tu ecosistema Spring Boot."/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/e99fcc8540a81b1c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e99fcc8540a81b1c.css" data-n-g=""/><link rel="preload" href="/_next/static/css/f8f60675323764f2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f8f60675323764f2.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-570070fdbf91d417.js" defer=""></script><script src="/_next/static/chunks/framework-75db3117d1377048.js" defer=""></script><script src="/_next/static/chunks/main-6d31f1caf3df54dd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-5f8ee1ef90dcf6c7.js" defer=""></script><script src="/_next/static/chunks/94726e6d-c72a854d4bfca4da.js" defer=""></script><script src="/_next/static/chunks/144-4ce2b94271136310.js" defer=""></script><script src="/_next/static/chunks/996-f3cf67c2e3ac5e06.js" defer=""></script><script src="/_next/static/chunks/581-aae012922ce60763.js" defer=""></script><script src="/_next/static/chunks/941-38f6f1657998506c.js" defer=""></script><script src="/_next/static/chunks/924-dbd55959fd098bb5.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-c171fda68c6d5435.js" defer=""></script><script src="/_next/static/Zz3LZEO5X5sTtAn6OoiOA/_buildManifest.js" defer=""></script><script src="/_next/static/Zz3LZEO5X5sTtAn6OoiOA/_ssgManifest.js" defer=""></script><script src="/_next/static/Zz3LZEO5X5sTtAn6OoiOA/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><script>!function(){try{var d=document.documentElement,n='data-theme',s='setAttribute';var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';d[s](n,'dark')}else{d.style.colorScheme = 'light';d[s](n,'light')}}else if(e){d[s](n,e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="container mx-auto mt-10 cursor-none"><div class="block tablet:hidden mt-5"><div class="flex items-center justify-between p-2 laptop:p-0"><h1 class="font-medium p-2 laptop:p-0 link">JAO<!-- -->.<!-- --></h1><div class="flex items-center"><select class="ml-2 p-1 border rounded transition-all duration-300 ease-out
        bg-white text-black border-gray-300
        hover:scale-105 active:scale-100 cursor-none undefined"><option value="es">üá™üá∏ Castellano<!-- --></option><option value="en" selected="">üá¨üáß English<!-- --></option><option value="eu">üá™üá∫ Euskera<!-- --></option></select><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined"><img class="h-6" src="/images/sun.svg" alt="Toggle theme"/></button><button id="headlessui-popover-button-:R4n6:" type="button" aria-expanded="false"><img class="h-5" src="/images/menu.svg" alt="Menu toggle"/></button></div></div></div><div class="mt-10 hidden flex-row items-center justify-between sticky dark:text-white top-0 z-10 tablet:flex"><h1 class="font-medium cursor-pointer">JAO<!-- -->.<!-- --></h1><div class="flex"><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Home</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Work</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">About</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Blog</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Frameworks</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Resume</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Contact</button><select class="ml-2 p-1 border rounded transition-all duration-300 ease-out
        bg-white text-black border-gray-300
        hover:scale-105 active:scale-100 cursor-none undefined"><option value="es">üá™üá∏ Castellano<!-- --></option><option value="en" selected="">üá¨üáß English<!-- --></option><option value="eu">üá™üá∫ Euskera<!-- --></option></select></div></div><div class="mt-10 flex flex-col"><img class="w-full h-96 rounded-lg shadow-lg object-cover" src="/images/blogs/point-normal-35_0UPwl6eo-unsplash.jpg" alt="Apache Kafka y Zookeeper en Arquitectura de Microservicios"/><h1 class="mt-10 text-4xl mob:text-2xl laptop:text-6xl text-bold">Apache Kafka y Zookeeper en Arquitectura de Microservicios</h1><h2 class="mt-2 text-xl max-w-4xl text-darkgray opacity-50">C√≥mo integrar Kafka y Zookeeper para construir sistemas distribuidos robustos y escalables</h2></div><div class="markdown-class"><h1>Apache Kafka y Zookeeper en Arquitectura de Microservicios<!-- --></h1>
<!-- --><p>En el mundo de los microservicios, uno de los mayores retos es la <!-- --><strong>comunicaci√≥n entre servicios<!-- --></strong>: confiable, escalable y desacoplada. Aqu√≠ es donde entra <!-- --><strong>Apache Kafka<!-- --></strong>, una plataforma de mensajer√≠a distribuida que permite que los servicios se comuniquen de forma eficiente, <!-- --><strong>sin acoplamientos directos<!-- --></strong>.<!-- --></p>
<!-- --><p>Pero, ¬øqu√© papel juega Zookeeper? ¬øC√≥mo se conectan ambos? ¬øY c√≥mo se integra todo esto en una arquitectura basada en Java Spring Boot?<!-- --></p>
<!-- --><p>Vamos a explorarlo. üëá<!-- --></p>
<!-- --><hr/>
<!-- --><h2>¬øQu√© es Apache Kafka?<!-- --></h2>
<!-- --><p>Apache Kafka es una <!-- --><strong>plataforma de mensajer√≠a distribuida basada en logs<!-- --></strong>. Permite publicar, almacenar y consumir flujos de eventos en tiempo real, y se utiliza como middleware en arquitecturas orientadas a eventos.<!-- --></p>
<!-- --><h3>Caracter√≠sticas clave:<!-- --></h3>
<!-- --><ul>
<!-- --><li>Alta disponibilidad y tolerancia a fallos<!-- --></li>
<!-- --><li>Almacenamiento persistente de eventos<!-- --></li>
<!-- --><li>Escalabilidad horizontal<!-- --></li>
<!-- --><li>Bajo acoplamiento entre productores y consumidores<!-- --></li>
<!-- --></ul>
<!-- --><hr/>
<!-- --><h2>¬øY qu√© hace Zookeeper?<!-- --></h2>
<!-- --><p><strong>Apache Zookeeper<!-- --></strong> es un sistema de coordinaci√≥n distribuida que Kafka utiliza para:<!-- --></p>
<!-- --><ul>
<!-- --><li>Gestionar la configuraci√≥n del cl√∫ster<!-- --></li>
<!-- --><li>Coordinar los brokers<!-- --></li>
<!-- --><li>Manejar la elecci√≥n del l√≠der del cl√∫ster<!-- --></li>
<!-- --><li>Supervisar el estado de los nodos<!-- --></li>
<!-- --></ul>
<!-- --><p>‚ö†Ô∏è Aunque Kafka ha evolucionado para reducir su dependencia de Zookeeper (desde Kafka 2.8 con KRaft), muchas instalaciones actuales a√∫n lo utilizan.<!-- --></p>
<!-- --><hr/>
<!-- --><h2>Kafka en Arquitectura de Microservicios<!-- --></h2>
<!-- --><h3>üß© Escenario com√∫n:<!-- --></h3>
<!-- --><ul>
<!-- --><li>Cada microservicio produce y consume eventos.<!-- --></li>
<!-- --><li>No se comunican entre s√≠ directamente, sino a trav√©s de <!-- --><strong>topics de Kafka<!-- --></strong>.<!-- --></li>
<!-- --><li>Se desacoplan totalmente: ni conocen la URL del otro ni esperan respuestas.<!-- --></li>
<!-- --></ul>
<!-- --><h3>üï∏ Patr√≥n resultante: <!-- --><strong>Event-Driven Architecture (EDA)<!-- --></strong></h3>
<!-- --><p>Cada servicio act√∫a como <!-- --><strong>productor<!-- --></strong>, <!-- --><strong>consumidor<!-- --></strong>, o ambos:<!-- --></p>
<!-- --><pre><div style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-bash" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#f8f8f2">[<!-- --></span><span> Servicio A <!-- --></span><span class="token" style="color:#f8f8f2">]<!-- --></span><span> ---<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span><span> topic: nuevo-usuario ---<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span><span> <!-- --></span><span class="token" style="color:#f8f8f2">[<!-- --></span><span> Servicio B <!-- --></span><span class="token" style="color:#f8f8f2">]<!-- --></span></code></div></pre>
<!-- --><h3>Organizaci√≥n de Topics<!-- --></h3>
<!-- --><p>Algunos ejemplos de topics comunes en sistemas reales:<!-- --></p>
<!-- --><p>usuarios.creados<!-- --></p>
<!-- --><p>ordenes.pagadas<!-- --></p>
<!-- --><p>notificaciones.enviadas<!-- --></p>
<!-- --><p>stock.actualizado<!-- --></p>
<!-- --><p>Cada evento representa un hecho ocurrido en el sistema, que puede interesar a m√∫ltiples consumidores.<!-- --></p>
<!-- --><h3>Implementaci√≥n b√°sica con Spring Boot<!-- --></h3>
<!-- --><h2>Dependencias:<!-- --></h2>
<!-- --><pre><div style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-xml" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#6272a4">&lt;!-- pom.xml --&gt;<!-- --></span><span>
<!-- --></span><span></span><span class="token" style="color:#f8f8f2">&lt;<!-- --></span><span class="token" style="color:#ff79c6">dependency<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token" style="color:#f8f8f2">&lt;<!-- --></span><span class="token" style="color:#ff79c6">groupId<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span><span>org.springframework.kafka<!-- --></span><span class="token" style="color:#f8f8f2">&lt;/<!-- --></span><span class="token" style="color:#ff79c6">groupId<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token" style="color:#f8f8f2">&lt;<!-- --></span><span class="token" style="color:#ff79c6">artifactId<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span><span>spring-kafka<!-- --></span><span class="token" style="color:#f8f8f2">&lt;/<!-- --></span><span class="token" style="color:#ff79c6">artifactId<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span><span>
<!-- --></span><span></span><span class="token" style="color:#f8f8f2">&lt;/<!-- --></span><span class="token" style="color:#ff79c6">dependency<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span></code></div></pre>
<!-- --><h2>Configuraci√≥n Kafka:<!-- --></h2>
<!-- --><pre><div style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-xml" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span># application.yml
<!-- --></span>spring:
<!-- -->  kafka:
<!-- -->    bootstrap-servers: localhost:9092
<!-- -->    consumer:
<!-- -->      group-id: microservicio-a
<!-- -->      auto-offset-reset: earliest
<!-- -->      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
<!-- -->      value-deserializer: org.apache.kafka.common.serialization.StringDeserializer
<!-- -->    producer:
<!-- -->      key-serializer: org.apache.kafka.common.serialization.StringSerializer
<!-- -->      value-serializer: org.apache.kafka.common.serialization.StringSerializer<!-- --></code></div></pre>
<!-- --><h3>Productor:<!-- --></h3>
<!-- --><pre><div style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-java" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token annotation" style="color:#f8f8f2">@Service<!-- --></span><span>
<!-- --></span><span></span><span class="token" style="color:#8be9fd">public<!-- --></span><span> <!-- --></span><span class="token" style="color:#8be9fd">class<!-- --></span><span> <!-- --></span><span class="token" style="color:#f1fa8c">UsuarioProducer<!-- --></span><span> <!-- --></span><span class="token" style="color:#f8f8f2">{<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token" style="color:#8be9fd">private<!-- --></span><span> <!-- --></span><span class="token" style="color:#8be9fd">final<!-- --></span><span> <!-- --></span><span class="token" style="color:#f1fa8c">KafkaTemplate<!-- --></span><span class="token generics" style="color:#f8f8f2">&lt;<!-- --></span><span class="token generics" style="color:#f1fa8c">String<!-- --></span><span class="token generics" style="color:#f8f8f2">,<!-- --></span><span class="token generics"> <!-- --></span><span class="token generics" style="color:#f1fa8c">String<!-- --></span><span class="token generics" style="color:#f8f8f2">&gt;<!-- --></span><span> kafkaTemplate<!-- --></span><span class="token" style="color:#f8f8f2">;<!-- --></span><span>
<!-- --></span>
<!-- --><span>    <!-- --></span><span class="token" style="color:#8be9fd">public<!-- --></span><span> <!-- --></span><span class="token" style="color:#f1fa8c">UsuarioProducer<!-- --></span><span class="token" style="color:#f8f8f2">(<!-- --></span><span class="token" style="color:#f1fa8c">KafkaTemplate<!-- --></span><span class="token generics" style="color:#f8f8f2">&lt;<!-- --></span><span class="token generics" style="color:#f1fa8c">String<!-- --></span><span class="token generics" style="color:#f8f8f2">,<!-- --></span><span class="token generics"> <!-- --></span><span class="token generics" style="color:#f1fa8c">String<!-- --></span><span class="token generics" style="color:#f8f8f2">&gt;<!-- --></span><span> kafkaTemplate<!-- --></span><span class="token" style="color:#f8f8f2">)<!-- --></span><span> <!-- --></span><span class="token" style="color:#f8f8f2">{<!-- --></span><span>
<!-- --></span><span>        <!-- --></span><span class="token" style="color:#8be9fd">this<!-- --></span><span class="token" style="color:#f8f8f2">.<!-- --></span><span>kafkaTemplate <!-- --></span><span class="token" style="color:#f8f8f2">=<!-- --></span><span> kafkaTemplate<!-- --></span><span class="token" style="color:#f8f8f2">;<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token" style="color:#f8f8f2">}<!-- --></span><span>
<!-- --></span>
<!-- --><span>    <!-- --></span><span class="token" style="color:#8be9fd">public<!-- --></span><span> <!-- --></span><span class="token" style="color:#8be9fd">void<!-- --></span><span> <!-- --></span><span class="token" style="color:#f1fa8c">publicarNuevoUsuario<!-- --></span><span class="token" style="color:#f8f8f2">(<!-- --></span><span class="token" style="color:#f1fa8c">String<!-- --></span><span> usuarioJson<!-- --></span><span class="token" style="color:#f8f8f2">)<!-- --></span><span> <!-- --></span><span class="token" style="color:#f8f8f2">{<!-- --></span><span>
<!-- --></span><span>        kafkaTemplate<!-- --></span><span class="token" style="color:#f8f8f2">.<!-- --></span><span class="token" style="color:#f1fa8c">send<!-- --></span><span class="token" style="color:#f8f8f2">(<!-- --></span><span class="token" style="color:#50fa7b">&quot;usuarios.creados&quot;<!-- --></span><span class="token" style="color:#f8f8f2">,<!-- --></span><span> usuarioJson<!-- --></span><span class="token" style="color:#f8f8f2">)<!-- --></span><span class="token" style="color:#f8f8f2">;<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token" style="color:#f8f8f2">}<!-- --></span><span>
<!-- --></span><span></span><span class="token" style="color:#f8f8f2">}<!-- --></span><span>
<!-- --></span></code></div></pre>
<!-- --><h3>Consumidor:<!-- --></h3>
<!-- --><pre><div style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-java" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token annotation" style="color:#f8f8f2">@Component<!-- --></span><span>
<!-- --></span><span></span><span class="token" style="color:#8be9fd">public<!-- --></span><span> <!-- --></span><span class="token" style="color:#8be9fd">class<!-- --></span><span> <!-- --></span><span class="token" style="color:#f1fa8c">UsuarioListener<!-- --></span><span> <!-- --></span><span class="token" style="color:#f8f8f2">{<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token annotation" style="color:#f8f8f2">@KafkaListener<!-- --></span><span class="token" style="color:#f8f8f2">(<!-- --></span><span>topics <!-- --></span><span class="token" style="color:#f8f8f2">=<!-- --></span><span> <!-- --></span><span class="token" style="color:#50fa7b">&quot;usuarios.creados&quot;<!-- --></span><span class="token" style="color:#f8f8f2">,<!-- --></span><span> groupId <!-- --></span><span class="token" style="color:#f8f8f2">=<!-- --></span><span> <!-- --></span><span class="token" style="color:#50fa7b">&quot;servicio-notificaciones&quot;<!-- --></span><span class="token" style="color:#f8f8f2">)<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token" style="color:#8be9fd">public<!-- --></span><span> <!-- --></span><span class="token" style="color:#8be9fd">void<!-- --></span><span> <!-- --></span><span class="token" style="color:#f1fa8c">escuchar<!-- --></span><span class="token" style="color:#f8f8f2">(<!-- --></span><span class="token" style="color:#f1fa8c">String<!-- --></span><span> mensaje<!-- --></span><span class="token" style="color:#f8f8f2">)<!-- --></span><span> <!-- --></span><span class="token" style="color:#f8f8f2">{<!-- --></span><span>
<!-- --></span><span>        <!-- --></span><span class="token" style="color:#f1fa8c">System<!-- --></span><span class="token" style="color:#f8f8f2">.<!-- --></span><span>out<!-- --></span><span class="token" style="color:#f8f8f2">.<!-- --></span><span class="token" style="color:#f1fa8c">println<!-- --></span><span class="token" style="color:#f8f8f2">(<!-- --></span><span class="token" style="color:#50fa7b">&quot;Usuario nuevo recibido: &quot;<!-- --></span><span> <!-- --></span><span class="token" style="color:#f8f8f2">+<!-- --></span><span> mensaje<!-- --></span><span class="token" style="color:#f8f8f2">)<!-- --></span><span class="token" style="color:#f8f8f2">;<!-- --></span><span>
<!-- --></span><span>        <!-- --></span><span class="token" style="color:#6272a4">// l√≥gica de negocio aqu√≠<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token" style="color:#f8f8f2">}<!-- --></span><span>
<!-- --></span><span></span><span class="token" style="color:#f8f8f2">}<!-- --></span></code></div></pre>
<!-- --><h3>Ventajas de Kafka + Microservicios<!-- --></h3>
<!-- --><p>‚úÖ Comunicaci√≥n desacoplada<!-- --></p>
<!-- --><p>‚úÖ Escalabilidad natural (varios consumidores por topic)<!-- --></p>
<!-- --><p>‚úÖ Persistencia de eventos (no pierdes datos si un servicio cae)<!-- --></p>
<!-- --><p>‚úÖ Integraci√≥n sencilla con Spring Boot<!-- --></p>
<!-- --><p>‚úÖ Soporte para m√∫ltiples patrones (event sourcing, CQRS, pub/sub, etc.)<!-- --></p>
<!-- --><h3>Consideraciones importantes<!-- --></h3>
<!-- --><p>Define bien la retenci√≥n de datos en tus topics (por tiempo o tama√±o).<!-- --></p>
<!-- --><p>Gestiona el schema de eventos (usa Apache Avro, JSON Schema, Protobuf).<!-- --></p>
<!-- --><p>Cuidado con los procesamientos duplicados o fuera de orden (usa idempotency).<!-- --></p>
<!-- --><p>Supervisa el cl√∫ster con herramientas como Kafka Manager o Confluent Control Center.<!-- --></p>
<!-- --><p>Automatiza pruebas de integraci√≥n con Testcontainers para Kafka.<!-- --></p>
<!-- --><h3>Alternativas modernas sin Zookeeper<!-- --></h3>
<!-- --><p>Desde Kafka 2.8 es posible usar KRaft mode, que elimina la necesidad de Zookeeper para entornos m√°s simples. Ideal para proyectos nuevos que no requieren una capa de coordinaci√≥n externa.<!-- --></p>
<!-- --><h3>Conclusi√≥n<!-- --></h3>
<!-- --><p>Apache Kafka, combinado con Zookeeper (o KRaft), es una soluci√≥n poderosa para construir microservicios orientados a eventos. Permite crear sistemas altamente disponibles, desacoplados y preparados para el crecimiento.<!-- --></p>
<!-- --><p>Implementarlo correctamente en Spring Boot es una gran inversi√≥n en la calidad y escalabilidad de tus aplicaciones.<!-- --></p></div><div class="mt-5 laptop:mt-40 p-2 laptop:p-0"><div><h1 class="text-2xl text-bold">Contact.</h1><div class="mt-10"><h1 class="text-3xl tablet:text-6xl laptop:text-6xl laptopl:text-8xl text-bold">LET&#x27;S WORK TOGETHER</h1><h1 class="text-3xl tablet:text-6xl laptop:text-6xl laptopl:text-8xl text-bold"></h1><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg bg-black text-white  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Schedule a call</button><div class="mt-10"><div class="undefined flex flex-wrap mob:flex-nowrap link"><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Github</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">LinkedIn</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Twitter</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Blog</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Email</button></div></div></div></div></div><h1 class="text-sm text-bold mt-2 laptop:mt-10 p-2 laptop:p-0">Made With ‚ù§ by<!-- --> <!-- --><a class="underline underline-offset-1" href="https://jaoportfolio.onrender.com/">Juan Arana Olalde</a></h1></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"date":"2025-08-26T17:00:00.000Z","slug":"sixteen","preview":"En arquitecturas de microservicios, Apache Kafka se ha convertido en el est√°ndar para comunicaci√≥n as√≠ncrona y desacoplada. Aprende c√≥mo Kafka y Zookeeper trabajan juntos y c√≥mo puedes implementarlos en tu ecosistema Spring Boot.","title":"Apache Kafka y Zookeeper en Arquitectura de Microservicios","tagline":"C√≥mo integrar Kafka y Zookeeper para construir sistemas distribuidos robustos y escalables","image":"/images/blogs/point-normal-35_0UPwl6eo-unsplash.jpg","content":"# Apache Kafka y Zookeeper en Arquitectura de Microservicios\r\n\r\nEn el mundo de los microservicios, uno de los mayores retos es la **comunicaci√≥n entre servicios**: confiable, escalable y desacoplada. Aqu√≠ es donde entra **Apache Kafka**, una plataforma de mensajer√≠a distribuida que permite que los servicios se comuniquen de forma eficiente, **sin acoplamientos directos**.\r\n\r\nPero, ¬øqu√© papel juega Zookeeper? ¬øC√≥mo se conectan ambos? ¬øY c√≥mo se integra todo esto en una arquitectura basada en Java Spring Boot?\r\n\r\nVamos a explorarlo. üëá\r\n\r\n---\r\n\r\n## ¬øQu√© es Apache Kafka?\r\n\r\nApache Kafka es una **plataforma de mensajer√≠a distribuida basada en logs**. Permite publicar, almacenar y consumir flujos de eventos en tiempo real, y se utiliza como middleware en arquitecturas orientadas a eventos.\r\n\r\n### Caracter√≠sticas clave:\r\n\r\n- Alta disponibilidad y tolerancia a fallos  \r\n- Almacenamiento persistente de eventos  \r\n- Escalabilidad horizontal  \r\n- Bajo acoplamiento entre productores y consumidores\r\n\r\n---\r\n\r\n## ¬øY qu√© hace Zookeeper?\r\n\r\n**Apache Zookeeper** es un sistema de coordinaci√≥n distribuida que Kafka utiliza para:\r\n\r\n- Gestionar la configuraci√≥n del cl√∫ster  \r\n- Coordinar los brokers  \r\n- Manejar la elecci√≥n del l√≠der del cl√∫ster  \r\n- Supervisar el estado de los nodos\r\n\r\n‚ö†Ô∏è Aunque Kafka ha evolucionado para reducir su dependencia de Zookeeper (desde Kafka 2.8 con KRaft), muchas instalaciones actuales a√∫n lo utilizan.\r\n\r\n---\r\n\r\n## Kafka en Arquitectura de Microservicios\r\n\r\n### üß© Escenario com√∫n:\r\n\r\n- Cada microservicio produce y consume eventos.  \r\n- No se comunican entre s√≠ directamente, sino a trav√©s de **topics de Kafka**.  \r\n- Se desacoplan totalmente: ni conocen la URL del otro ni esperan respuestas.\r\n\r\n### üï∏ Patr√≥n resultante: **Event-Driven Architecture (EDA)**\r\n\r\nCada servicio act√∫a como **productor**, **consumidor**, o ambos:\r\n\r\n```bash\r\n[ Servicio A ] ---\u003e topic: nuevo-usuario ---\u003e [ Servicio B ]\r\n```\r\n\r\n### Organizaci√≥n de Topics\r\n\r\nAlgunos ejemplos de topics comunes en sistemas reales:\r\n\r\nusuarios.creados\r\n\r\nordenes.pagadas\r\n\r\nnotificaciones.enviadas\r\n\r\nstock.actualizado\r\n\r\nCada evento representa un hecho ocurrido en el sistema, que puede interesar a m√∫ltiples consumidores.\r\n\r\n### Implementaci√≥n b√°sica con Spring Boot\r\n## Dependencias:\r\n```xml\r\n\u003c!-- pom.xml --\u003e\r\n\u003cdependency\u003e\r\n    \u003cgroupId\u003eorg.springframework.kafka\u003c/groupId\u003e\r\n    \u003cartifactId\u003espring-kafka\u003c/artifactId\u003e\r\n\u003c/dependency\u003e\r\n```\r\n## Configuraci√≥n Kafka:\r\n```xml\r\n# application.yml\r\nspring:\r\n  kafka:\r\n    bootstrap-servers: localhost:9092\r\n    consumer:\r\n      group-id: microservicio-a\r\n      auto-offset-reset: earliest\r\n      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer\r\n      value-deserializer: org.apache.kafka.common.serialization.StringDeserializer\r\n    producer:\r\n      key-serializer: org.apache.kafka.common.serialization.StringSerializer\r\n      value-serializer: org.apache.kafka.common.serialization.StringSerializer\r\n```\r\n### Productor:\r\n```java\r\n@Service\r\npublic class UsuarioProducer {\r\n    private final KafkaTemplate\u003cString, String\u003e kafkaTemplate;\r\n\r\n    public UsuarioProducer(KafkaTemplate\u003cString, String\u003e kafkaTemplate) {\r\n        this.kafkaTemplate = kafkaTemplate;\r\n    }\r\n\r\n    public void publicarNuevoUsuario(String usuarioJson) {\r\n        kafkaTemplate.send(\"usuarios.creados\", usuarioJson);\r\n    }\r\n}\r\n\r\n```\r\n### Consumidor:\r\n```java\r\n@Component\r\npublic class UsuarioListener {\r\n    @KafkaListener(topics = \"usuarios.creados\", groupId = \"servicio-notificaciones\")\r\n    public void escuchar(String mensaje) {\r\n        System.out.println(\"Usuario nuevo recibido: \" + mensaje);\r\n        // l√≥gica de negocio aqu√≠\r\n    }\r\n}\r\n```\r\n### Ventajas de Kafka + Microservicios\r\n\r\n‚úÖ Comunicaci√≥n desacoplada\r\n\r\n‚úÖ Escalabilidad natural (varios consumidores por topic)\r\n\r\n‚úÖ Persistencia de eventos (no pierdes datos si un servicio cae)\r\n\r\n‚úÖ Integraci√≥n sencilla con Spring Boot\r\n\r\n‚úÖ Soporte para m√∫ltiples patrones (event sourcing, CQRS, pub/sub, etc.)\r\n\r\n### Consideraciones importantes\r\n\r\nDefine bien la retenci√≥n de datos en tus topics (por tiempo o tama√±o).\r\n\r\nGestiona el schema de eventos (usa Apache Avro, JSON Schema, Protobuf).\r\n\r\nCuidado con los procesamientos duplicados o fuera de orden (usa idempotency).\r\n\r\nSupervisa el cl√∫ster con herramientas como Kafka Manager o Confluent Control Center.\r\n\r\nAutomatiza pruebas de integraci√≥n con Testcontainers para Kafka.\r\n\r\n### Alternativas modernas sin Zookeeper\r\n\r\nDesde Kafka 2.8 es posible usar KRaft mode, que elimina la necesidad de Zookeeper para entornos m√°s simples. Ideal para proyectos nuevos que no requieren una capa de coordinaci√≥n externa.\r\n\r\n### Conclusi√≥n\r\n\r\nApache Kafka, combinado con Zookeeper (o KRaft), es una soluci√≥n poderosa para construir microservicios orientados a eventos. Permite crear sistemas altamente disponibles, desacoplados y preparados para el crecimiento.\r\n\r\nImplementarlo correctamente en Spring Boot es una gran inversi√≥n en la calidad y escalabilidad de tus aplicaciones."}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"sixteen"},"buildId":"Zz3LZEO5X5sTtAn6OoiOA","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>