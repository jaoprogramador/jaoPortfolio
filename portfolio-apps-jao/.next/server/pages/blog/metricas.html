<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Blog - Monitoreo de Microservicios con Prometheus y Grafana</title><meta name="description" content="Descubre cómo implementar un sistema de observabilidad con Prometheus y Grafana en tus microservicios Spring Boot. Aprende qué métricas recolectar, cómo configurarlas y construir dashboards y alertas efectivas."/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/e99fcc8540a81b1c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e99fcc8540a81b1c.css" data-n-g=""/><link rel="preload" href="/_next/static/css/f8f60675323764f2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f8f60675323764f2.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-570070fdbf91d417.js" defer=""></script><script src="/_next/static/chunks/framework-75db3117d1377048.js" defer=""></script><script src="/_next/static/chunks/main-6d31f1caf3df54dd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-5f8ee1ef90dcf6c7.js" defer=""></script><script src="/_next/static/chunks/94726e6d-c72a854d4bfca4da.js" defer=""></script><script src="/_next/static/chunks/144-4ce2b94271136310.js" defer=""></script><script src="/_next/static/chunks/996-f3cf67c2e3ac5e06.js" defer=""></script><script src="/_next/static/chunks/581-aae012922ce60763.js" defer=""></script><script src="/_next/static/chunks/941-38f6f1657998506c.js" defer=""></script><script src="/_next/static/chunks/924-dbd55959fd098bb5.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-c171fda68c6d5435.js" defer=""></script><script src="/_next/static/Zz3LZEO5X5sTtAn6OoiOA/_buildManifest.js" defer=""></script><script src="/_next/static/Zz3LZEO5X5sTtAn6OoiOA/_ssgManifest.js" defer=""></script><script src="/_next/static/Zz3LZEO5X5sTtAn6OoiOA/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><script>!function(){try{var d=document.documentElement,n='data-theme',s='setAttribute';var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';d[s](n,'dark')}else{d.style.colorScheme = 'light';d[s](n,'light')}}else if(e){d[s](n,e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="container mx-auto mt-10 cursor-none"><div class="block tablet:hidden mt-5"><div class="flex items-center justify-between p-2 laptop:p-0"><h1 class="font-medium p-2 laptop:p-0 link">JAO<!-- -->.<!-- --></h1><div class="flex items-center"><select class="ml-2 p-1 border rounded transition-all duration-300 ease-out
        bg-white text-black border-gray-300
        hover:scale-105 active:scale-100 cursor-none undefined"><option value="es">🇪🇸 Castellano<!-- --></option><option value="en" selected="">🇬🇧 English<!-- --></option><option value="eu">🇪🇺 Euskera<!-- --></option></select><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined"><img class="h-6" src="/images/sun.svg" alt="Toggle theme"/></button><button id="headlessui-popover-button-:R4n6:" type="button" aria-expanded="false"><img class="h-5" src="/images/menu.svg" alt="Menu toggle"/></button></div></div></div><div class="mt-10 hidden flex-row items-center justify-between sticky dark:text-white top-0 z-10 tablet:flex"><h1 class="font-medium cursor-pointer">JAO<!-- -->.<!-- --></h1><div class="flex"><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Home</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Work</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">About</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Blog</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Frameworks</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Resume</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Contact</button><select class="ml-2 p-1 border rounded transition-all duration-300 ease-out
        bg-white text-black border-gray-300
        hover:scale-105 active:scale-100 cursor-none undefined"><option value="es">🇪🇸 Castellano<!-- --></option><option value="en" selected="">🇬🇧 English<!-- --></option><option value="eu">🇪🇺 Euskera<!-- --></option></select></div></div><div class="mt-10 flex flex-col"><img class="w-full h-96 rounded-lg shadow-lg object-cover" src="/images/blogs/prometheus-grafana.jpg" alt="Monitoreo de Microservicios con Prometheus y Grafana"/><h1 class="mt-10 text-4xl mob:text-2xl laptop:text-6xl text-bold">Monitoreo de Microservicios con Prometheus y Grafana</h1><h2 class="mt-2 text-xl max-w-4xl text-darkgray opacity-50">De la teoría a la práctica. Observa tu sistema en tiempo real con métricas claras y visualizaciones potentes</h2></div><div class="markdown-class"><h1>Monitoreo de Microservicios con Prometheus y Grafana 📊<!-- --></h1>
<!-- --><p>En arquitecturas distribuidas, <!-- --><strong>lo que no se mide no se mejora<!-- --></strong>.<!-- --><br/>
<!-- -->Prometheus y Grafana son el <!-- --><strong>estándar de facto<!-- --></strong> para <!-- --><strong>monitoreo de métricas y visualización<!-- --></strong> en entornos modernos con <!-- --><strong>Kubernetes<!-- --></strong> y <!-- --><strong>Spring Boot<!-- --></strong>.<!-- --></p>
<!-- --><p>En este artículo aprenderás:<!-- --></p>
<!-- --><p>✅ ¿Qué son Prometheus y Grafana y para qué sirven?<!-- --><br/>
<!-- -->✅ ¿Por qué las métricas son clave en microservicios?<!-- --><br/>
<!-- -->✅ Cómo integrarlos con Spring Boot<!-- --><br/>
<!-- -->✅ Ejemplos de métricas y dashboards<!-- --><br/>
<!-- -->✅ Buenas prácticas y alertas<!-- --></p>
<!-- --><hr/>
<!-- --><h2>✅ ¿Qué son Prometheus y Grafana?<!-- --></h2>
<!-- --><h3><strong>Prometheus<!-- --></strong></h3>
<!-- --><ul>
<!-- --><li><strong>Sistema de monitoreo y alertas<!-- --></strong> open source.<!-- --></li>
<!-- --><li>Recolecta métricas mediante <!-- --><strong>pull<!-- --></strong> (scraping HTTP).<!-- --></li>
<!-- --><li>Guarda datos en <!-- --><strong>serie temporal<!-- --></strong>.<!-- --></li>
<!-- --><li>Usa <!-- --><strong>PromQL<!-- --></strong> para consultas y alertas.<!-- --></li>
<!-- --></ul>
<!-- --><h3><strong>Grafana<!-- --></strong></h3>
<!-- --><ul>
<!-- --><li>Herramienta de <!-- --><strong>visualización y análisis<!-- --></strong>.<!-- --></li>
<!-- --><li>Crea <!-- --><strong>dashboards dinámicos<!-- --></strong> sobre Prometheus (y otras fuentes).<!-- --></li>
<!-- --><li>Soporta <!-- --><strong>alertas<!-- --></strong> y notificaciones (Slack, email, PagerDuty).<!-- --></li>
<!-- --></ul>
<!-- --><hr/>
<!-- --><h2>✅ ¿Por qué necesitas métricas en microservicios?<!-- --></h2>
<!-- --><ul>
<!-- --><li><strong>Detección temprana<!-- --></strong> de fallos (errores, saturación).<!-- --></li>
<!-- --><li><strong>Escalado proactivo<!-- --></strong> (HPA basado en métricas).<!-- --></li>
<!-- --><li><strong>SLIs/SLOs/SLAs<!-- --></strong> claros (latencia, disponibilidad).<!-- --></li>
<!-- --><li><strong>Optimización<!-- --></strong> de performance y costos.<!-- --></li>
<!-- --></ul>
<!-- --><p><strong>Tipos comunes de métricas (Golden Signals):<!-- --></strong></p>
<!-- --><ul>
<!-- --><li><strong>Latencia<!-- --></strong> (request duration)<!-- --></li>
<!-- --><li><strong>Tráfico<!-- --></strong> (requests por segundo)<!-- --></li>
<!-- --><li><strong>Errores<!-- --></strong> (rate de errores HTTP 4xx/5xx)<!-- --></li>
<!-- --><li><strong>Saturación<!-- --></strong> (uso de CPU, memoria, hilos)<!-- --></li>
<!-- --></ul>
<!-- --><hr/>
<!-- --><h2>✅ Integración con Spring Boot (Micrometer + Actuator)<!-- --></h2>
<!-- --><p>Spring Boot integra <!-- --><strong>Micrometer<!-- --></strong>, un facade para sistemas de métricas (Prometheus, Datadog, etc.).<!-- --></p>
<!-- --><h3>Dependencias Maven<!-- --></h3>
<!-- --><pre><div style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-xml" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#f8f8f2">&lt;<!-- --></span><span class="token" style="color:#ff79c6">dependency<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token" style="color:#f8f8f2">&lt;<!-- --></span><span class="token" style="color:#ff79c6">groupId<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span><span>org.springframework.boot<!-- --></span><span class="token" style="color:#f8f8f2">&lt;/<!-- --></span><span class="token" style="color:#ff79c6">groupId<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token" style="color:#f8f8f2">&lt;<!-- --></span><span class="token" style="color:#ff79c6">artifactId<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span><span>spring-boot-starter-actuator<!-- --></span><span class="token" style="color:#f8f8f2">&lt;/<!-- --></span><span class="token" style="color:#ff79c6">artifactId<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span><span>
<!-- --></span><span></span><span class="token" style="color:#f8f8f2">&lt;/<!-- --></span><span class="token" style="color:#ff79c6">dependency<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span><span>
<!-- --></span><span></span><span class="token" style="color:#f8f8f2">&lt;<!-- --></span><span class="token" style="color:#ff79c6">dependency<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token" style="color:#f8f8f2">&lt;<!-- --></span><span class="token" style="color:#ff79c6">groupId<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span><span>io.micrometer<!-- --></span><span class="token" style="color:#f8f8f2">&lt;/<!-- --></span><span class="token" style="color:#ff79c6">groupId<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token" style="color:#f8f8f2">&lt;<!-- --></span><span class="token" style="color:#ff79c6">artifactId<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span><span>micrometer-registry-prometheus<!-- --></span><span class="token" style="color:#f8f8f2">&lt;/<!-- --></span><span class="token" style="color:#ff79c6">artifactId<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span><span>
<!-- --></span><span></span><span class="token" style="color:#f8f8f2">&lt;/<!-- --></span><span class="token" style="color:#ff79c6">dependency<!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span></code></div></pre>
<!-- --><h2>Configuración en application.yml<!-- --></h2>
<!-- --><pre><div style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-yml" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token key" style="color:#f1fa8c">management<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>  <!-- --></span><span class="token key" style="color:#f1fa8c">endpoints<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token key" style="color:#f1fa8c">web<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>      <!-- --></span><span class="token key" style="color:#f1fa8c">exposure<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>        <!-- --></span><span class="token key" style="color:#f1fa8c">include<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> <!-- --></span><span class="token" style="color:#50fa7b">&quot;health,metrics,prometheus&quot;<!-- --></span><span>
<!-- --></span><span>  <!-- --></span><span class="token key" style="color:#f1fa8c">endpoint<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token key" style="color:#f1fa8c">prometheus<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>      <!-- --></span><span class="token key" style="color:#f1fa8c">enabled<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> <!-- --></span><span class="token" style="color:#ffb86c;font-weight:bold">true<!-- --></span></code></div></pre>
<!-- --><p>Esto habilita /actuator/prometheus con métricas listas para Prometheus.<!-- --></p>
<!-- --><h2>✅ Ejemplo de métricas expuestas<!-- --></h2>
<!-- --><h1>HELP http_server_requests_seconds<!-- --></h1>
<!-- --><h1>TYPE http_server_requests_seconds_summary<!-- --></h1>
<!-- --><p>http_server_requests_seconds_count{method=&quot;GET&quot;,uri=&quot;/api/users&quot;,status=&quot;200&quot;,} 15.0<!-- --></p>
<!-- --><h1>HELP jvm_memory_used_bytes<!-- --></h1>
<!-- --><h1>TYPE jvm_memory_used_bytes gauge<!-- --></h1>
<!-- --><p>jvm_memory_used_bytes{area=&quot;heap&quot;} 1.234e+07<!-- --></p>
<!-- --><p>Incluye:<!-- --></p>
<!-- --><p>HTTP (latencia, count por endpoint)<!-- --></p>
<!-- --><p>JVM (memoria, GC, hilos)<!-- --></p>
<!-- --><p>Base de datos (con Hikari)<!-- --></p>
<!-- --><p>Custom (negocio con @Timed o MeterRegistry)<!-- --></p>
<!-- --><h2>✅ Instalación de Prometheus y Grafana (Kubernetes)<!-- --></h2>
<!-- --><h3>Prometheus (Deployment y ConfigMap básico)<!-- --></h3>
<!-- --><pre><div style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-yml" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token key" style="color:#f1fa8c">apiVersion<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> v1
<!-- --></span><span></span><span class="token key" style="color:#f1fa8c">kind<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> ConfigMap
<!-- --></span><span></span><span class="token key" style="color:#f1fa8c">metadata<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>  <!-- --></span><span class="token key" style="color:#f1fa8c">name<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> prometheus<!-- --></span><span class="token" style="color:#f8f8f2">-<!-- --></span><span>config
<!-- --></span><span></span><span class="token key" style="color:#f1fa8c">data<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>  <!-- --></span><span class="token key" style="color:#f1fa8c">prometheus.yml<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> <!-- --></span><span class="token" style="color:#f8f8f2">|<!-- --></span><span class="token scalar" style="color:#50fa7b">
<!-- --></span><span class="token scalar" style="color:#50fa7b">    global:
<!-- --></span><span class="token scalar" style="color:#50fa7b">      scrape_interval: 15s
<!-- --></span><span class="token scalar" style="color:#50fa7b">    scrape_configs:
<!-- --></span><span class="token scalar" style="color:#50fa7b">      - job_name: &#x27;spring-apps&#x27;
<!-- --></span><span class="token scalar" style="color:#50fa7b">        metrics_path: &#x27;/actuator/prometheus&#x27;
<!-- --></span><span class="token scalar" style="color:#50fa7b">        kubernetes_sd_configs:
<!-- --></span><span class="token scalar" style="color:#50fa7b">          - role: pod
<!-- --></span><span class="token scalar" style="color:#50fa7b">        relabel_configs:
<!-- --></span><span class="token scalar" style="color:#50fa7b">          - source_labels: [__meta_kubernetes_pod_label_app]
<!-- --></span><span class="token scalar" style="color:#50fa7b">            regex: (.+)
<!-- --></span><span class="token scalar" style="color:#50fa7b">            target_label: app<!-- --></span></code></div></pre>
<!-- --><pre><div style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-yml" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token key" style="color:#f1fa8c">Deployment<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span></span><span class="token key" style="color:#f1fa8c">apiVersion<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> apps/v1
<!-- --></span><span></span><span class="token key" style="color:#f1fa8c">kind<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> Deployment
<!-- --></span><span></span><span class="token key" style="color:#f1fa8c">metadata<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>  <!-- --></span><span class="token key" style="color:#f1fa8c">name<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> prometheus
<!-- --></span><span></span><span class="token key" style="color:#f1fa8c">spec<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>  <!-- --></span><span class="token key" style="color:#f1fa8c">replicas<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> <!-- --></span><span class="token" style="color:#bd93f9">1<!-- --></span><span>
<!-- --></span><span>  <!-- --></span><span class="token key" style="color:#f1fa8c">selector<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token key" style="color:#f1fa8c">matchLabels<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> <!-- --></span><span class="token" style="color:#f8f8f2">{<!-- --></span><span> <!-- --></span><span class="token key" style="color:#f1fa8c">app<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> prometheus <!-- --></span><span class="token" style="color:#f8f8f2">}<!-- --></span><span>
<!-- --></span><span>  <!-- --></span><span class="token key" style="color:#f1fa8c">template<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token key" style="color:#f1fa8c">metadata<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>      <!-- --></span><span class="token key" style="color:#f1fa8c">labels<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> <!-- --></span><span class="token" style="color:#f8f8f2">{<!-- --></span><span> <!-- --></span><span class="token key" style="color:#f1fa8c">app<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> prometheus <!-- --></span><span class="token" style="color:#f8f8f2">}<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token key" style="color:#f1fa8c">spec<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>      <!-- --></span><span class="token key" style="color:#f1fa8c">containers<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>        <!-- --></span><span class="token" style="color:#f8f8f2">-<!-- --></span><span> <!-- --></span><span class="token key" style="color:#f1fa8c">name<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> prometheus
<!-- --></span><span>          <!-- --></span><span class="token key" style="color:#f1fa8c">image<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> prom/prometheus<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>v2.46.0
<!-- --></span><span>          <!-- --></span><span class="token key" style="color:#f1fa8c">ports<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> <!-- --></span><span class="token" style="color:#f8f8f2">[<!-- --></span><span class="token" style="color:#f8f8f2">{<!-- --></span><span> <!-- --></span><span class="token key" style="color:#f1fa8c">containerPort<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> <!-- --></span><span class="token" style="color:#bd93f9">9090<!-- --></span><span> <!-- --></span><span class="token" style="color:#f8f8f2">}<!-- --></span><span class="token" style="color:#f8f8f2">]<!-- --></span><span>
<!-- --></span><span>          <!-- --></span><span class="token key" style="color:#f1fa8c">volumeMounts<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>            <!-- --></span><span class="token" style="color:#f8f8f2">-<!-- --></span><span> <!-- --></span><span class="token key" style="color:#f1fa8c">name<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> config
<!-- --></span><span>              <!-- --></span><span class="token key" style="color:#f1fa8c">mountPath<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> /etc/prometheus
<!-- --></span><span>      <!-- --></span><span class="token key" style="color:#f1fa8c">volumes<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>        <!-- --></span><span class="token" style="color:#f8f8f2">-<!-- --></span><span> <!-- --></span><span class="token key" style="color:#f1fa8c">name<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> config
<!-- --></span><span>          <!-- --></span><span class="token key" style="color:#f1fa8c">configMap<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>            <!-- --></span><span class="token key" style="color:#f1fa8c">name<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> prometheus<!-- --></span><span class="token" style="color:#f8f8f2">-<!-- --></span><span>config<!-- --></span></code></div></pre>
<!-- --><h2>Grafana<!-- --></h2>
<!-- --><pre><div style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-yml" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token key" style="color:#f1fa8c">apiVersion<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> apps/v1
<!-- --></span><span></span><span class="token key" style="color:#f1fa8c">kind<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> Deployment
<!-- --></span><span></span><span class="token key" style="color:#f1fa8c">metadata<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>  <!-- --></span><span class="token key" style="color:#f1fa8c">name<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> grafana
<!-- --></span><span></span><span class="token key" style="color:#f1fa8c">spec<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>  <!-- --></span><span class="token key" style="color:#f1fa8c">replicas<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> <!-- --></span><span class="token" style="color:#bd93f9">1<!-- --></span><span>
<!-- --></span><span>  <!-- --></span><span class="token key" style="color:#f1fa8c">selector<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token key" style="color:#f1fa8c">matchLabels<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> <!-- --></span><span class="token" style="color:#f8f8f2">{<!-- --></span><span> <!-- --></span><span class="token key" style="color:#f1fa8c">app<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> grafana <!-- --></span><span class="token" style="color:#f8f8f2">}<!-- --></span><span>
<!-- --></span><span>  <!-- --></span><span class="token key" style="color:#f1fa8c">template<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token key" style="color:#f1fa8c">metadata<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>      <!-- --></span><span class="token key" style="color:#f1fa8c">labels<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> <!-- --></span><span class="token" style="color:#f8f8f2">{<!-- --></span><span> <!-- --></span><span class="token key" style="color:#f1fa8c">app<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> grafana <!-- --></span><span class="token" style="color:#f8f8f2">}<!-- --></span><span>
<!-- --></span><span>    <!-- --></span><span class="token key" style="color:#f1fa8c">spec<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>      <!-- --></span><span class="token key" style="color:#f1fa8c">containers<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>        <!-- --></span><span class="token" style="color:#f8f8f2">-<!-- --></span><span> <!-- --></span><span class="token key" style="color:#f1fa8c">name<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> grafana
<!-- --></span><span>          <!-- --></span><span class="token key" style="color:#f1fa8c">image<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> grafana/grafana<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>10.0.0
<!-- --></span><span>          <!-- --></span><span class="token key" style="color:#f1fa8c">ports<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> <!-- --></span><span class="token" style="color:#f8f8f2">[<!-- --></span><span class="token" style="color:#f8f8f2">{<!-- --></span><span> <!-- --></span><span class="token key" style="color:#f1fa8c">containerPort<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> <!-- --></span><span class="token" style="color:#bd93f9">3000<!-- --></span><span> <!-- --></span><span class="token" style="color:#f8f8f2">}<!-- --></span><span class="token" style="color:#f8f8f2">]<!-- --></span></code></div></pre>
<!-- --><h2>✅ Dashboards recomendados en Grafana<!-- --></h2>
<!-- --><p>Spring Boot Statistics (oficial).<!-- --></p>
<!-- --><p>JVM (Micrometer).<!-- --></p>
<!-- --><p>HTTP Server Requests (por endpoint).<!-- --></p>
<!-- --><p>HikariCP (conexiones DB).<!-- --></p>
<!-- --><p>Custom métricas de negocio.<!-- --></p>
<!-- --><p>Importa dashboards desde grafana.com/dashboards<!-- --></p>
<!-- --><h2>✅ Alertas con Prometheus<!-- --></h2>
<!-- --><p>Ejemplo de regla (latencia &gt; 500ms por 5 min):<!-- --></p>
<!-- --><pre><div style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-yml" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token key" style="color:#f1fa8c">groups<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>  <!-- --></span><span class="token" style="color:#f8f8f2">-<!-- --></span><span> <!-- --></span><span class="token key" style="color:#f1fa8c">name<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> latency<!-- --></span><span class="token" style="color:#f8f8f2">-<!-- --></span><span>alerts
<!-- --></span><span>    <!-- --></span><span class="token key" style="color:#f1fa8c">rules<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>      <!-- --></span><span class="token" style="color:#f8f8f2">-<!-- --></span><span> <!-- --></span><span class="token key" style="color:#f1fa8c">alert<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> HighRequestLatency
<!-- --></span><span>        <!-- --></span><span class="token key" style="color:#f1fa8c">expr<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> histogram_quantile(0.95<!-- --></span><span class="token" style="color:#f8f8f2">,<!-- --></span><span> sum(rate(http_server_requests_seconds_bucket<!-- --></span><span class="token" style="color:#f8f8f2">[<!-- --></span><span>5m<!-- --></span><span class="token" style="color:#f8f8f2">]<!-- --></span><span>)) by (le))
<!-- --></span><span>          <!-- --></span><span class="token" style="color:#f8f8f2">&gt;<!-- --></span><span> 0.5
<!-- --></span><span>        <!-- --></span><span class="token key" style="color:#f1fa8c">for<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> 5m
<!-- --></span><span>        <!-- --></span><span class="token key" style="color:#f1fa8c">labels<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>          <!-- --></span><span class="token key" style="color:#f1fa8c">severity<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> warning
<!-- --></span><span>        <!-- --></span><span class="token key" style="color:#f1fa8c">annotations<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span>
<!-- --></span><span>          <!-- --></span><span class="token key" style="color:#f1fa8c">summary<!-- --></span><span class="token" style="color:#f8f8f2">:<!-- --></span><span> <!-- --></span><span class="token" style="color:#50fa7b">&quot;Latencia alta (p95 &gt; 500ms)&quot;<!-- --></span></code></div></pre>
<!-- --><h2>Conecta a Alertmanager y envía a Slack/Email.<!-- --></h2>
<!-- --><p>✅ Comandos básicos para Prometheus/Grafana<!-- --></p>
<!-- --><h1>Prometheus<!-- --></h1>
<!-- --><p>kubectl port-forward svc/prometheus 9090:9090 -n monitoring<!-- --></p>
<!-- --><h1>Grafana<!-- --></h1>
<!-- --><p>kubectl port-forward svc/grafana 3000:3000 -n monitoring<!-- --></p>
<!-- --><p>Login default Grafana: admin/admin.<!-- --></p>
<!-- --><h2>✅ Buenas prácticas<!-- --></h2>
<!-- --><p>✔ Define métricas personalizadas para eventos críticos (MeterRegistry).
✔ Usa histogramas y percentiles (p95/p99) en vez de promedios.
✔ Configura scrape_interval adecuado (no abuses del cluster).
✔ Establece SLIs y SLOs medibles (ej. error_rate &lt; 1%).
✔ Automatiza dashboards y alertas (Infra as Code, Grafana Provisioning).<!-- --></p>
<!-- --><h2>✅ ¿Algo extra? (si buscas observabilidad completa)<!-- --></h2>
<!-- --><p>Logs centralizados: Loki, ELK.<!-- --></p>
<!-- --><p>Trazas distribuidas: OpenTelemetry + Tempo/Jaeger.<!-- --></p>
<!-- --><p>Service Mesh: métricas automáticas (Istio/Linkerd).<!-- --></p>
<!-- --><h2>✅ Conclusión<!-- --></h2>
<!-- --><p>Prometheus + Grafana te dan visibilidad total sobre tus microservicios.
Con estas herramientas podrás detectar problemas antes de que los usuarios los sufran, optimizar recursos y cumplir con SLOs.
Monitorear no es opcional, es estratégico. 🚀<!-- --></p></div><div class="mt-5 laptop:mt-40 p-2 laptop:p-0"><div><h1 class="text-2xl text-bold">Contact.</h1><div class="mt-10"><h1 class="text-3xl tablet:text-6xl laptop:text-6xl laptopl:text-8xl text-bold">LET&#x27;S WORK TOGETHER</h1><h1 class="text-3xl tablet:text-6xl laptop:text-6xl laptopl:text-8xl text-bold"></h1><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg bg-black text-white  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Schedule a call</button><div class="mt-10"><div class="undefined flex flex-wrap mob:flex-nowrap link"><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Github</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">LinkedIn</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Twitter</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Blog</button><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg hover:bg-slate-100  transition-all duration-300 ease-out hover:scale-105 active:scale-100 cursor-none undefined">Email</button></div></div></div></div></div><h1 class="text-sm text-bold mt-2 laptop:mt-10 p-2 laptop:p-0">Made With ❤ by<!-- --> <!-- --><a class="underline underline-offset-1" href="https://jaoportfolio.onrender.com/">Juan Arana Olalde</a></h1></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"date":"2025-08-29T17:00:00.000Z","slug":"metricas","preview":"Descubre cómo implementar un sistema de observabilidad con Prometheus y Grafana en tus microservicios Spring Boot. Aprende qué métricas recolectar, cómo configurarlas y construir dashboards y alertas efectivas.","title":"Monitoreo de Microservicios con Prometheus y Grafana","tagline":"De la teoría a la práctica. Observa tu sistema en tiempo real con métricas claras y visualizaciones potentes","image":"/images/blogs/prometheus-grafana.jpg","content":"# Monitoreo de Microservicios con Prometheus y Grafana 📊\r\n\r\nEn arquitecturas distribuidas, **lo que no se mide no se mejora**.  \r\nPrometheus y Grafana son el **estándar de facto** para **monitoreo de métricas y visualización** en entornos modernos con **Kubernetes** y **Spring Boot**.\r\n\r\nEn este artículo aprenderás:\r\n\r\n✅ ¿Qué son Prometheus y Grafana y para qué sirven?  \r\n✅ ¿Por qué las métricas son clave en microservicios?  \r\n✅ Cómo integrarlos con Spring Boot  \r\n✅ Ejemplos de métricas y dashboards  \r\n✅ Buenas prácticas y alertas  \r\n\r\n---\r\n\r\n## ✅ ¿Qué son Prometheus y Grafana?\r\n\r\n### **Prometheus**\r\n- **Sistema de monitoreo y alertas** open source.\r\n- Recolecta métricas mediante **pull** (scraping HTTP).\r\n- Guarda datos en **serie temporal**.\r\n- Usa **PromQL** para consultas y alertas.\r\n\r\n### **Grafana**\r\n- Herramienta de **visualización y análisis**.\r\n- Crea **dashboards dinámicos** sobre Prometheus (y otras fuentes).\r\n- Soporta **alertas** y notificaciones (Slack, email, PagerDuty).\r\n\r\n---\r\n\r\n## ✅ ¿Por qué necesitas métricas en microservicios?\r\n\r\n- **Detección temprana** de fallos (errores, saturación).\r\n- **Escalado proactivo** (HPA basado en métricas).\r\n- **SLIs/SLOs/SLAs** claros (latencia, disponibilidad).\r\n- **Optimización** de performance y costos.\r\n\r\n**Tipos comunes de métricas (Golden Signals):**\r\n- **Latencia** (request duration)\r\n- **Tráfico** (requests por segundo)\r\n- **Errores** (rate de errores HTTP 4xx/5xx)\r\n- **Saturación** (uso de CPU, memoria, hilos)\r\n\r\n---\r\n\r\n## ✅ Integración con Spring Boot (Micrometer + Actuator)\r\n\r\nSpring Boot integra **Micrometer**, un facade para sistemas de métricas (Prometheus, Datadog, etc.).\r\n\r\n### Dependencias Maven\r\n```xml\r\n\u003cdependency\u003e\r\n    \u003cgroupId\u003eorg.springframework.boot\u003c/groupId\u003e\r\n    \u003cartifactId\u003espring-boot-starter-actuator\u003c/artifactId\u003e\r\n\u003c/dependency\u003e\r\n\u003cdependency\u003e\r\n    \u003cgroupId\u003eio.micrometer\u003c/groupId\u003e\r\n    \u003cartifactId\u003emicrometer-registry-prometheus\u003c/artifactId\u003e\r\n\u003c/dependency\u003e\r\n```\r\n\r\n## Configuración en application.yml\r\n```yml\r\nmanagement:\r\n  endpoints:\r\n    web:\r\n      exposure:\r\n        include: \"health,metrics,prometheus\"\r\n  endpoint:\r\n    prometheus:\r\n      enabled: true\r\n```\r\n\r\nEsto habilita /actuator/prometheus con métricas listas para Prometheus.\r\n\r\n## ✅ Ejemplo de métricas expuestas\r\n\r\n# HELP http_server_requests_seconds  \r\n# TYPE http_server_requests_seconds_summary\r\nhttp_server_requests_seconds_count{method=\"GET\",uri=\"/api/users\",status=\"200\",} 15.0\r\n# HELP jvm_memory_used_bytes  \r\n# TYPE jvm_memory_used_bytes gauge\r\njvm_memory_used_bytes{area=\"heap\"} 1.234e+07\r\n\r\n\r\nIncluye:\r\n\r\nHTTP (latencia, count por endpoint)\r\n\r\nJVM (memoria, GC, hilos)\r\n\r\nBase de datos (con Hikari)\r\n\r\nCustom (negocio con @Timed o MeterRegistry)\r\n\r\n## ✅ Instalación de Prometheus y Grafana (Kubernetes)\r\n### Prometheus (Deployment y ConfigMap básico)\r\n```yml\r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: prometheus-config\r\ndata:\r\n  prometheus.yml: |\r\n    global:\r\n      scrape_interval: 15s\r\n    scrape_configs:\r\n      - job_name: 'spring-apps'\r\n        metrics_path: '/actuator/prometheus'\r\n        kubernetes_sd_configs:\r\n          - role: pod\r\n        relabel_configs:\r\n          - source_labels: [__meta_kubernetes_pod_label_app]\r\n            regex: (.+)\r\n            target_label: app\r\n```\r\n```yml\r\nDeployment:\r\napiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: prometheus\r\nspec:\r\n  replicas: 1\r\n  selector:\r\n    matchLabels: { app: prometheus }\r\n  template:\r\n    metadata:\r\n      labels: { app: prometheus }\r\n    spec:\r\n      containers:\r\n        - name: prometheus\r\n          image: prom/prometheus:v2.46.0\r\n          ports: [{ containerPort: 9090 }]\r\n          volumeMounts:\r\n            - name: config\r\n              mountPath: /etc/prometheus\r\n      volumes:\r\n        - name: config\r\n          configMap:\r\n            name: prometheus-config\r\n```\r\n## Grafana\r\n\r\n```yml\r\napiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: grafana\r\nspec:\r\n  replicas: 1\r\n  selector:\r\n    matchLabels: { app: grafana }\r\n  template:\r\n    metadata:\r\n      labels: { app: grafana }\r\n    spec:\r\n      containers:\r\n        - name: grafana\r\n          image: grafana/grafana:10.0.0\r\n          ports: [{ containerPort: 3000 }]\r\n```\r\n## ✅ Dashboards recomendados en Grafana\r\n\r\nSpring Boot Statistics (oficial).\r\n\r\nJVM (Micrometer).\r\n\r\nHTTP Server Requests (por endpoint).\r\n\r\nHikariCP (conexiones DB).\r\n\r\nCustom métricas de negocio.\r\n\r\nImporta dashboards desde grafana.com/dashboards\r\n\r\n## ✅ Alertas con Prometheus\r\n\r\nEjemplo de regla (latencia \u003e 500ms por 5 min):\r\n```yml\r\ngroups:\r\n  - name: latency-alerts\r\n    rules:\r\n      - alert: HighRequestLatency\r\n        expr: histogram_quantile(0.95, sum(rate(http_server_requests_seconds_bucket[5m])) by (le))\r\n          \u003e 0.5\r\n        for: 5m\r\n        labels:\r\n          severity: warning\r\n        annotations:\r\n          summary: \"Latencia alta (p95 \u003e 500ms)\"\r\n```\r\n\r\n## Conecta a Alertmanager y envía a Slack/Email.\r\n\r\n✅ Comandos básicos para Prometheus/Grafana\r\n# Prometheus\r\nkubectl port-forward svc/prometheus 9090:9090 -n monitoring\r\n# Grafana\r\nkubectl port-forward svc/grafana 3000:3000 -n monitoring\r\n\r\n\r\nLogin default Grafana: admin/admin.\r\n\r\n## ✅ Buenas prácticas\r\n\r\n✔ Define métricas personalizadas para eventos críticos (MeterRegistry).\r\n✔ Usa histogramas y percentiles (p95/p99) en vez de promedios.\r\n✔ Configura scrape_interval adecuado (no abuses del cluster).\r\n✔ Establece SLIs y SLOs medibles (ej. error_rate \u003c 1%).\r\n✔ Automatiza dashboards y alertas (Infra as Code, Grafana Provisioning).\r\n\r\n## ✅ ¿Algo extra? (si buscas observabilidad completa)\r\n\r\nLogs centralizados: Loki, ELK.\r\n\r\nTrazas distribuidas: OpenTelemetry + Tempo/Jaeger.\r\n\r\nService Mesh: métricas automáticas (Istio/Linkerd).\r\n\r\n## ✅ Conclusión\r\n\r\nPrometheus + Grafana te dan visibilidad total sobre tus microservicios.\r\nCon estas herramientas podrás detectar problemas antes de que los usuarios los sufran, optimizar recursos y cumplir con SLOs.\r\nMonitorear no es opcional, es estratégico. 🚀"}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"metricas"},"buildId":"Zz3LZEO5X5sTtAn6OoiOA","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>